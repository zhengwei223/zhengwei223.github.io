---
layout: post
title: 运筹帷幄——使用程序控制语句
category: 初学者的第一套Java教程
tags: Java 入门
keywords: 蓝桥 lanqiao 教程 java Java8 循环 分支 运算符
description: 分支与循环的应用
author: 付天有
importance: 4
order: 4
---

# 摘要

计算机是模拟大脑在工作，而程序就是我们大脑思维的描述。我们在思考时会遇到各种各样的岔路，比如如果今天天气好，我就去江边游玩。如果我老板给我加薪，我就大吃一顿。而程序当然也需要有能力来描述这种逻辑。

# 实验一 判断奇数和偶数

> 目的：捕获控制台输入一个整数，如果这个数是偶数，则打印"X是一个偶数",如果是一个奇数，则打印"X是一个奇数"。

## 0 思考

与我们之前写过的程序不同，我们的程序不再是仅仅有一种可能，程序会根据输入的内容，给出不同的执行结果。先整理思绪，写出注释伪代码。

	//类声明
	{
		//主方法声明
		{
			//控制台内容捕获器
			//等待获取控制台输入整数内容，并出入变量num
			//声明输出结果
			//判断数字奇偶性（是否能被2整除），根据不同逻辑赋值给输出结果
			//打印结果
		}
	}		

利用注释编写伪代码是一种非常有效的思路梳理方法，我们根据注释所写的逻辑顺序，依次编写相应代码。

## 1 关键技术

在判断数字奇偶时，我们需要用到两个关键技术，**`a%b`(求余数运算符，又叫取模运算,结果是a除以b的余数)**和**a?b:c(条件运算符)**

## 2 编程
	
	import java.util.Scanner;
	
	//类声明
	public class ParityCheck {
		//主方法声明
		public static void main(String[] args) {
			//控制台内容捕获器
			Scanner scanner = new Scanner(System.in);
			//等待获取控制台输入整数内容，并出入变量num
			int num = scanner.nextInt();
			//声明输出结果
			String result;
			//判断数字奇偶性（是否能被2整除），根据不同逻辑赋值给输出结果
			result = (num%2==0?"这是一个偶数":"这是一个奇数");
			//打印结果
			System.out.println(result);
		}
	}

## 3 解读

### 取模运算符

判断一个数的奇偶性最直接的办法就是这个数能否被2整除，我们之前学习过除法运算`/`，运算结果为除法的商，而`%`的结果就是除法的余数。

	int num = 10%3;//num的值为1

### 关系运算符

num%2==0中，`==`的意义为判断`==`左右表达式的值是否相等，表达式结果为boolean型，即true或false。**一定要区分`=`和`==`区别**。

- `=`是赋值运算符，`int a = 10;`是把一个变量或字面值赋值给另一个变量。
- `==`是关系运算符，`boolean b = (1==2);`运算结果是一个boolean型，b为false;

关系运算符的表达方式和数学中类似，除了等值关系判断，还有大于小于等判断。

下表为Java支持的关系运算符

表格中的实例整数变量A的值为10，变量B的值为20：

![关系运算符](https://coding.net/u/lanqiao/p/lanqiao/git/raw/coding-pages/public/img/Java8/relationOperation.png)

### 条件运算符

我们运用了条件运算符a?b:c，这个运算符的表达式结果变量是b或c其中一个，而a是一个boolean表达式。如果a这个布尔表达式为true，则a?b:c结果为b,否则为c。
	
	//num能被2整除则result结果为"这是一个偶数"否则是"这是一个奇数"。
	result = (num%2==0?"这是一个偶数":"这是一个奇数");

## 4 反思

我们利用条件运算符描述了一种简单的分支逻辑，让我们的程序能够判断逻辑来执行不同的操作。

尝试分析如下流程

![注册流程](https://coding.net/u/lanqiao/p/lanqiao/git/raw/coding-pages/public/img/Java8/%25E5%2588%2586%25E6%2594%25AF%25E6%25B5%2581%25E7%25A8%258B.png)

这种逻辑分支较多，且存在嵌套，如果使用条件运算符来描述这种逻辑，显然比较复杂而且程序可读性会很差。

## 5 改进

	import java.util.Scanner;
	//类声明
	public class ParityCheckIf {
		//主方法声明
			public static void main(String[] args) {
				//控制台内容捕获器
				Scanner scanner = new Scanner(System.in);
				//等待获取控制台输入整数内容，并出入变量num
				int num = scanner.nextInt();
				//声明输出结果
				String result;
				//判断数字奇偶性（是否能被2整除），根据不同逻辑赋值给输出结果
				if(num%2==0){
					result = "这是一个偶数";
				}else{
					result = "这是一个奇数";
				}
				//打印结果
				System.out.println(result);
				
			}
	}

## 6 理解

if...else结构比较容易理解，结构为

	if(条件){
		//条件成立(true)所执行语句
	}else{
		//条件不成立(false)所执行的语句
	}

其中else语句是可选的，`if(){}`可以单独出现

if...else结构还有一些变化

	//条件1不成立时，再判断条件2
	if(条件1){

	}else if(条件2){
		
	}...

注意：如果没有else,仅时if...if...结构时，执行逻辑时不同的，if...if无论之前条件是否成立都会逐个条件判断执行，而if...else if结构会在前置条件不成立时执行。

	int num = 10;
	if(num > 0){
		System.out.println("这个数是正数");
	}else if(num%2==0){//此时如果去掉else,无论num等于几，这个逻辑还是会判断
		System.out.println("这个数是偶数");
	}

嵌套使用

	if(条件1){
		if(子条件1){
		
		}...
	}...

## 7 补充

### 逻辑运算符与布尔表达式

在使用分支结构时，我们使用了较多了boolean表达式（布尔表达式），目前我们使用的布尔表达式可以通过关系运算符（==、!=、>、>=、<=）获得，还可以通过**逻辑运算符**组装获得。

下表列出了逻辑运算符的基本运算，假设布尔变量A为真，变量B为假

![逻辑运算符](https://coding.net/u/lanqiao/p/lanqiao/git/raw/coding-pages/public/img/Java8/logicOperation.png)

注意：、A和B都必须是布尔类型表达式。运算符中还有`|`和'&'运算符，与`&&`和`||`不同。参考[http://www.runoob.com/java/java-operators.html](http://www.runoob.com/java/java-operators.html "运算符")中位运算。


## 8 巩固

### 判断输入的年份是否为闰年

从控制台输入一个年份，程序自动判断该年份是否为闰年。

### 判定条件

满足以下条件之一可被判定为闰年

1、能被4整除但不能被100整除

2、能被400整除

### 分析

条件1和条件2构成了一个"或关系"，即条件1和条件2成立一个即可判定为闰年

条件1中，`能被4整除`和`不能被100整除`构成了"与关系",即两者同时成立才能判定成立。

故逻辑判定布尔表达式为

	(year%4==0 && year%100!=0) || year%400==0

### 代码
	
	import java.util.Scanner;
	
	public class LeapYear {
		public static void main(String[] args) {
			Scanner scanner = new Scanner(System.in);
			int year = scanner.nextInt();
			if((year%4==0 && year%100!=0) || year%400==0){
				System.out.println(year + "是闰年");
			}else{
				System.out.println(year + "不是闰年");
			}
		}
	}


# 实验二 商场活动价格计算

> 商场周年庆酬宾，全场满500全单95折，满1000全单88折，满2000全单8折，满5000尊享66折，根据输入的总价格，给出需要结算的金额。

## 0 思路梳理

	//类与主方法声明...
	//获取总金额
	//声明结算价格
	//0<总价格<500   	 结算金额=总价格*1.0
	//500<总价格<1000	 结算金额=总价格*0.95
	//1000<总价格<2000	 结算金额=总价格*0.88
	//2000<总价格<5000	 结算金额=总价格*0.8
	//总价格>5000    	 结算金额=总价格*0.66

## 1 if实现

	public class PriceCalculation {
	
		public static void main(String[] args) {
			//获取总金额
			Scanner scanner = new Scanner(System.in);
			float total = scanner.nextFloat();
			//声明结算价格
			float finalPrice;
			if(total>0 && total<500){
				//0<总价格<500   	 结算金额=总价格*1.0
				finalPrice = total*1.0f;
			}else if(total>=500 && total<1000){
				//500<总价格<1000	 结算金额=总价格*0.95
				finalPrice = total*0.95f;
			}else if(total>=1000 && total<2000){
				//1000<总价格<2000	 结算金额=总价格*0.88
				finalPrice = total*0.88f;
			}else if(total>=2000 && total<5000){
				//2000<总价格<5000	 结算金额=总价格*0.8
				finalPrice = total*0.8f;
			}else if(total>=5000){
				//总价格>5000    	 结算金额=总价格*0.66
				finalPrice = total*0.66f;
			}else{
				//以上条件都不符合，则价格不在参考区间
				System.out.println("价格输入有误!");
				return;//不在执行以后的语句，退出main方法
			}
			System.out.println("消费的最终价格为"+finalPrice);
		}
	}

此实现中规中矩，逻辑上没有任何问题，但是繁杂的判断也让我们足够头疼。

其中最后的else我们加入了容错提示，及当我们输入的数字小于0时，我们程序不会输出最终价格。`return`关键字会退出当前方法，我们目前都是在main方法中编程，main方法退出后，程序就终止了。

## 2 switch...case语句

	switch(表达式){
		case  字面值1:
			代码块A;
			break;
		case  字面值2:
			代码块B;
			break;
		…
		default:
			代码块X;
			break;
	}

switch关键字表示“开关”，当表达式与case后的字面值相等时，开关被打开，匹配的case以后的代码会被执行。尤其需要注意的是，这个表达式的值只允许是byte、short、int和char类型（在JDK 7.0中表达式的值可以是String）类型。

case后必须要跟一个与表达式类型对应的常量，case可以有多个，且顺序可以改变，但是每个case后面的常量值必须不同。当表达式的实际值与case后的常量相等时，其后的代码块就会执行。

default表示当表达式的实际值没有匹配到前面对应的任何case常量，default后面的默认代码块会被执行，default通常放在末尾。

break表示跳出当前结构，必须注意不要忘记。如果没有break，"开关打开"后，每一个case中的语句都会被执行。直到结构最末或者遇到break。

## 3 switch实现

	import java.util.Scanner;
	public class SwitchImpl {
		public static void main(String[] args) {
			//获取总金额
			Scanner scanner = new Scanner(System.in);
			float total = scanner.nextFloat();
			//声明结算价格
			float finalPrice;
			//价格分级，结果为总价格/500的整除结果
			int grade = (int)total/500;
			System.out.println("您的折扣等级为"+grade);
			switch (grade) {
			case 0:
				//0<总价格<500   	 结算金额=总价格*1.0
				finalPrice = total*1.0f;
				break;
			case 1:
				//500<总价格<1000	 结算金额=总价格*0.95
				finalPrice = total*0.95f;
				break;
			case 2://从此开始总价格>1000,开关打开
			case 3:
				//总价格>1500 结算金额=总价格*0.88
				finalPrice = total*0.88f;
				break;
			case 4://从此开始总价格>2000,开关打开
			case 5:
			case 6:
			case 7:
			case 8:
			case 9:
				//2000<总价格<5000	 结算金额=总价格*0.8
				finalPrice = total*0.8f;
				break;
			default:
				//总价格>5000    	 结算金额=总价格*0.66
				finalPrice = total*0.66f;
				break;
			}
			
			System.out.println("消费的最终价格为"+finalPrice);
		}
	}

## 4 解读

根据switch结构的特点，我们的表达式只能为byte、short、char、int、String(JDK7以后)，
并且这个表达式仅能和case中字面值做等值比较。所以我们按500为一个区间把价格划分为不同等级，这样，我们就把一段连续的数转化为一个个区间等级。

注意：double/int结果为小数，我们需要强制转化为int,确保做整除运算

case 2为大于1000的开关，比如价格1200，1200/500=2，进入case2,此case没有break，所以继续向下执行，到case3处，执行计算逻辑并break，不在向下执行。case4-case9同理。defalut执行默认逻辑。如果没有任何case匹配则执行default。

## 5 小结

在功能上，if能够实现switch的任何实现，但是在相同功能场景下，switch要比if速度更快。

switch 仅能适应等值判断，在必要时可以把区间判断转换为等值关系判断。

return关键字为退出当前方法语句，而break是退出特定结构。两者控制的范围不同。狭义理解，return 退出的范围更大。

# 总结

通过两个实现，我们了解了程序内的分支结构的使用。利用分支结构我们可以完成程序的逻辑判断。

分为以下两种类型

- 条件分支：根据给定的条件进行判断，决定执行哪个分支的程序段。

1.if..if...

2.if...else...

3.if..else if

4.嵌套if..else

- 开关分支：根据给定类型表达式的值进行等值判断，决定执行从哪一段分支开始执行。

switch...case （break）

# 实战练习

1、判断用户输入的月份的季节（★）

2、判断输入的用户名密码是否匹配admin(用户名)/123(密码)（提示：String a与String b相等用`a.equals(b)`来判断）（★★）

3、控制台输入会员等级和商品价格，根据不同会员等级计算商品价格(白金会员 8折、黄金会员 9折、普通会员 9.5折、非会员 原价)（★★）




