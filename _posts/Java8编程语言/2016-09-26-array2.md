---
layout: post
title: 物以类聚——数组
category: 初学者的第一套Java教程
tags: Java 入门
keywords: 蓝桥 lanqiao 教程 java Java8 数组
description: 数组
author: 付天有
importance: 2
order: 6
---

>之前的实验中我们用到的数据规模都很小，当数据的规模比较大的时候，我们需要用结构去组织数据，例如同一类数据我们可以用数组这种结构去组织。数组是什么？怎么用？这是本章的主题。

- 数组的基础知识
- 一维数组的应用
- 二维数组的应用

# 基础知识：问题引入

## 什么是数组

> 数组是一种特殊的数据类型，它描述了一组拥有相同数据类型的数据集合。

比如我们现实生活种的书柜、鞋柜。都是用来装放特定事物的容器。如果把一本书比作一个"图书"类型的变量，那么书架就可以理解为一个图书类型的数组。

![数组示意图](/public/img/Java8/array.png)

## 为什么要使用数组

说到为什么要设计数组这种数据类型，思考一下为什么我们要使用书架？

当然，你会想到很多好处，如：便于管理图书、能够快速的定位到我想要找的图书、看起来更加简洁。

那么这些也正是数组存在的原因。

## 什么场景下需要使用数组

通常我们选择数据这种数据结构是要满足：

1. 一组变量拥有相同数据类型
2. 这些变量要拥有相同的表达意图
3. 这些变量的数量是已知或可预测

# 基础知识：数组使用四部曲

## 1. 声明数组

一维数组的声明方式：

    type var[]; 或 type[] var;

其中`type`为数据类型，var可以是任意合法的标识符。

**注意**：声明数组时不能指定其长度（数组中元素的个数），`int scores[10];`是错误的声明

二维数组的声明:
  
    type var[][]; 或 type[][] var;

多维数组的声明相信大家可以举一反三了吧。
  
## 2. 分配空间

这个过程是告诉计算机分配几个连续的空间
  
    int[] score;
    score = new int[10]; 分配一个10个int的一维连续空间
    int[][] arr2;
    arr2 = new int[5][5]; 分配一个5行5列的二维连续空间

## 3. 赋值和引用

### 声明同时赋值：

    int[] scores = new int[]{88,76,90,89,70,95,99,85,66,89};
    double m[][] = {
      { 0 * 0, 1 * 0, 2 * 0, 3 * 0 },
  
      { 0 * 1, 1 * 1, 2 * 1, 3 * 1 },
  
      { 0 * 2, 1 * 2, 2 * 2, 3 * 2 },
  
      { 0 * 3, 1 * 3, 2 * 3, 3 * 3 } };

需要注意的是"{}"这种赋值方式必须在声明时**立刻赋值**，且不能声明数组的长度，以下声明方式都是错误的：

    int[] scores;
    scores = {1,2,3,4,5};//错误！｛｝赋值只能跟在数组声明的时候。
    int[] arr = new int[3]{1,2,3};//错误！｛｝赋值不能指定数组长度

### 引用赋值：

我们可以通过数组的下标获取任意数组元素，并为其赋值

    int[] score = new int[30];
    Scanner input = new Scanner(System.in);
    for(int i = 0; i < 30; i ++){
         score[i] = input.nextInt();
    }

注意：对于数组元素的引用和赋值要格外注意数组的下标，当所引用的下标超出了数组声明的长度，将会报出`java.lang.ArrayIndexOutOfBoundsException`异常

    int[] score = {10,11,52}; //score[0]=10;score[1]=11;score[2]=52;
    System.out.println(score[3]);//已经超出score数组的最大下标引用


## 4. 数据处理

### 数组的遍历：

遍历是数组的最基本操作：

    int[] scores = new int[]{88,76,90,89,70,95,99,85,66,89};
    for(int i=0;i < scores.length;i++){
      System.out.println("数组的第" + i + "位是" + scores[i]);
    }

以上代码就完成了遍历输出每一位数组元素。
这里用到了`数组对象.length`的方法来获取数组的长度

JDK1.5提供了一个增强的for循环来简化数组的遍历。

    for (int score : scores) {
      System.out.println(score);
    }

但是这中方式也有它的缺点，就是无法在循环体中获取数组的下标。


### 数组元素换位

    int[] scores = new int[]{88,76,90,89,70,95,99,85,66,89};
    //交换0号下标元素与9号下标元素
    int temp = scores[0];
    scores[0] = scores[9];
    scores[9] = temp;

*注：数组元素的换位需要借助中间变量。*

# 实验一 用数组管理扑克牌

> 一副扑克有54张牌，我们需要用一个数组来管理这副牌——数组有54个元素，每个数组元素分别代表一张扑克牌，1-13(黑桃A-K)、14-26(红桃A-K)、梅花、方片。53小鬼，54大鬼

## 1 关键代码

	//扑克牌声明
	int[] cards = new int[54];
	//扑克牌赋值
	for (int i = 0; i < cards.length; i++) {
		cards[i] = i+1;
	}

## 2 解读

由于数组内已知有54个元素，数量较多，不适合利用声明时直接赋值，故用一个循环结构完成数组的赋值操作，1-54每一个数字代表一张牌。

# 实验二 随机抽出一张扑克牌

>这个实验也可以称作打乱一副扑克牌：随机抽取54次，抽出一张就放在一边（输出这张牌），直到全部抽出。

## 1 随机数生成方法

JDK中`Math.random()`方法会返回一个大于等于0小于1的随机数。

利用这个[0,1)中的随机数，我们可以获取到一个我们期望区间内的随机数。

54张扑克牌在数组中的下标为0~53。我们期望的随机数区间为[0,53]的整数

`Math.random()*54`随机数的分布区间为[0,54)的小数(最大为53.999...)。

## 2 关键代码

```java
// 接上一实验代码
for(int i = 0;i < 54;){
  int ram = (int)(Math.random()*54);//强制转换为int，舍掉小数位，范围[0,53]
  int card = cards[ram];  //随机抽出的牌
  if(card > 0){  // 抽到了未被标记的牌
    cards[ram] = -1;  // 数组元素被标记为-1，说明这张牌已经被抽出
    System.out.println("随机抽出的手牌为"+card);
    i++;   // 继续
  }
}
```

# 实验三 为三个玩家发牌

> 将扑克牌平均但随机地分配给三个玩家（每人17张），剩余的牌（3章）作为底牌，输出三人手牌及底牌

## 实现

    import java.util.Arrays;
    
    public class Poker {
      public static void main(String[] args) {
        //扑克牌声明
        int[] cards = new int[54];
        //扑克牌赋值
        for (int i = 0; i < cards.length; i++) {
          cards[i] = i+1;
        }
        //玩家手牌声明
        int[] player1 = new int[17];
        int[] player2 = new int[17];
        int[] player3 = new int[17];
        
        //为player1发牌
        for (int i = 0; i < player1.length; ) {
          //注意循环控制i++并没有写在for表达式中，而是在循环内部自己控制
          int ram = (int) (Math.random() * 54);;//获取0-53随机数，派给玩家（可以先给一家派牌，也可轮流派）
          if(cards[ram]>0){
            //如果随机下标已派出，则该下标值置为-1，如遇到-1，重新生成随机数派牌
            player1[i] = cards[ram];
            cards[ram] = -1;
            i++;
          }
        }
        
        //为player2发牌
        for (int i = 0; i < player2.length; ) {
          //发牌
          int ram = (int) (Math.random() * 54);
          if(cards[ram]>0){
            player2[i] = cards[ram];
            cards[ram] = -1;
            i++;
          }
        }
        
        //为player3发牌
        for (int i = 0; i < player3.length;) {
          //发牌
          int ram = (int) (Math.random() * 54);
          if(cards[ram]>0){
            player3[i] = cards[ram];
            cards[ram] = -1;
            i++;
          }
        }
        
        //输出各玩家手牌
        System.out.println(Arrays.toString(player1));
        System.out.println(Arrays.toString(player2));
        System.out.println(Arrays.toString(player3));
        
        //输出底牌
        System.out.println("----底牌----");
        for (int i = 0; i < cards.length; i++) {
          if(cards[i] != -1){
            System.out.print(cards[i]+",");
          }
        }
      }
    }

## 解读

**Arrays工具类**

`Arrays.toString(player1)`可以把数组变为一个字符串，格式为`[数组元素,...]`,Arrays需要`import java.util.Arrays;`引入工具包，Arrays提供了很多数组操作方法，可以参考API文档。

三个人的手牌也都是数组，发牌过程就是随机的在牌堆中选牌，然后赋值给3位玩家的手牌数组。

# 实验四 用二维数组改进实验三

在声明player1，player2，player3时，我们反复声明了3个数组，那么数组类型是否也可以声明为数组呢？

    int[][] players = new int[3][17];//相当于3个int[17]的数组

这种数组称作二维数组，声明方式与普通一位数组类似，同理还有三维、四维数组..N维数组。

我们利用二维数组来优化一下我们的代码

    import java.util.Arrays;
    
    public class Poker2 {
      public static void main(String[] args) {
        //扑克牌声明
        int[] cards = new int[54];
        //扑克牌赋值
        for (int i = 0; i < cards.length; i++) {
          cards[i] = i+1;
        }
        //玩家手牌声明
        int[][] players = new int[3][17];
        
        //为player发牌
        for (int i = 0; i < players.length; i++) {
          //循环为每一个player发牌，players[i],就是每一个player的牌，数量为17
          for (int j = 0; j < players[i].length; ) {
            //player[i][j]为每一个player的具体某一张手牌
            int ram = (int) (Math.random() * 54);;//获取0-53随机数，派给玩家（可以先给一家派牌，也可轮流派）
            if(cards[ram]>0){
              //如果随机下标已派出，则该下标值置为-1，如遇到-1，重新生成随机数派牌
              players[i][j] = cards[ram];
              cards[ram] = -1;
              j++;
            }
          }
          System.out.println("player"+(i+1)+"的手牌" + Arrays.toString(players[i]));
        }
        
        //输出底牌
        for (int i = 0; i < cards.length; i++) {
          if(cards[i]!=-1){
            System.out.print(cards[i]+",");
          }
        }
      }
    }

二维数组可以利用嵌套循环来操作。

# 实验五 对已知数字序列排序

> 目的：给定数字序列，按照由小到大顺序输出序列

## 为什么要研究排序

首先排序是一个非常常见的编程问题，在很多面试题中都会出现，那么我们为什么要挖空心思来研究排序问题呢？

1、业务场景需要：比如一个班级内学员的成绩，我们要求要从高到低排列。

2、便于查找：我们在一个无序的序列中查找一个元素，只能通过逐个元素去比对查找，而一旦序列有序，我们就能够很快的找到目标元素所处的区间。

3、利于统计分析：我们把数据排序后，就能够很方便去进行一些列的数据分析和统计，比如某一年度内商品的销量走势，这个序列就需要按照时间来排序。

## 实现思路：冒泡

![排序算法原理](/public/img/Java8/bubble-sort.gif)

依次比较相邻的两个数，将小数放在前面，大数放在后面。

第一轮：首先比较第1个和第2个数，将小数放前，大数放后；然后比较第2个数和第3个数，将小数放前，大数放后，如此继续，直至比较最后两个数，将小数放前，大数放后；至此第一轮结束，将最大的数放到了最后。

第二轮：仍从第一对数开始比较，将小数放前，大数放后，一直比较到倒数第二个数（倒数第一的位置上已经是最大的数），第二轮结束，在倒数第二的位置上得到一个新的最大数（其实在整个数列中是第二大的数）。

按此规律操作，直至最终完成排序。由于在排序过程中总是小数往前放，大数往后放，类似于小的气泡往上升，所以称作冒泡排序。

通过上面的分析可以看出，假设需要排序的序列的个数是n，则需要经过n-1轮，最终完成排序。在第一轮中，比较的次数是n-1次，之后每轮减少1次。

这个方法叫做冒泡排序法，让最大或最小的元素，像气泡一样一层一层冒出来。

## 代码

    /**
     * 冒泡排序算法实现
     */
    public class BubbleSort {
      public static void main(String[] args) {
        int[] a = new int[]{88,76,90,89,70,95,99,85,66,89};//待排序数组
        int temp;
        //数组的长度可以通过“数组名.length”获得
        for (int i = 0; i < a.length-1; i++) {      //需要比较n-1轮
          for (int j = 0; j < a.length-i-1 ; j++) { //根据a.length-i-1，每轮需要比较的次数逐轮减少1次
            if (a[j] > a[j+1]) {      //相邻数进行比较，符合条件进行替换
              temp = a[j];
              a[j] = a[j+1];
              a[j+1] = temp;
            }
          }
        }
        System.out.println(Arrays.toString(a));
      }
      
    }

## 解读

排序算法有很多，且各自有各自的特点和应用场景，对于不同量级，是否部分有序，空间限制等等都是排序算法选择的依据。算法是一个优秀程序员的灵魂，在初学阶段大家可不必过分钻研，待掌握了基本程序写法后，大家可以深入研究更多的算法。

Arrays工具类提供了sort方法，此方法利用快速排序法对给定数组进行排序。

    int[] arr = {1,3,5,8,6,11};
    Arrays.sort(arr);//对给定数组进行排序

更多排序算法参考[常见排序算法_java版本](/数据结构与算法/sort-java-impl)


# 实战练习

1、有100盏灯，依次编号1-100，初始都是关着的。第1次，打开全部的灯；第2次，关掉第2盏、第4盏等被2整除的灯；第3次打开被3整除的灯；第i次，对被i整除的灯做如下操作

- 如果灯开着，就关掉
- 如果灯关着，就打开

如此交替进行，知道100次遍历完毕，请问，还有多少盏灯亮着。

2、控制台录入10名学生考试成绩，输出最高分和最低分。

3、输出给定数列的倒序输出

4、有一分数序列：2/1，3/2，5/3，8/5，13/8，21/13，求出这个数列的前20项之和。

5、打印出杨辉三角

![](/public/img/Java8/yanghui.jpg)

