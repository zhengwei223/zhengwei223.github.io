---
layout: post
title: 周而复始——使用循环结构
category: 初学者的第一套Java教程
tags: Java 入门
keywords: 蓝桥 lanqiao 教程 java Java8 循环 分支 
description: 循环的使用
author: 付天有
importance: 2
order: 5
---

# 实验一 判断奇偶数增强版

> 从控制台获取一个数，判断这个数的奇偶性，判断完毕后继续等待判断下一个数。

## 0 思考

计算机的优势就在与高效的计算与处理重复事件的能力，这样如繁重的重复工作该如何优雅的实现呢。

## 1 关键技术

while...do/do...while结构

	while(循环条件){
		//循环代码块
	}

	do{
		//循环代码块
	}while(循环条件)；


## 2 重构

	import java.util.Scanner;
	//类声明
	public class ParityCheck {
		//主方法声明
		public static void main(String[] args) {
			//控制台内容捕获器
			Scanner scanner = new Scanner(System.in);
			//循环执行获取与判断
			while (true) {
				System.out.println("请输入一个整数");
				//等待获取控制台输入整数内容，并出入变量num
				int num = scanner.nextInt();
				//声明输出结果
				String result;
				//判断数字奇偶性（是否能被2整除），根据不同逻辑赋值给输出结果
				result = (num % 2 == 0 ? "这是一个偶数" : "这是一个奇数");
				//打印结果
				System.out.println(result);
			}
			
		}
	}

## 3 解读

我们使用了while..do结构来执行了一个重复任务，其语义是：如果循环条件的值为true，则执行循环代码块，否则跳出循环。

我们使用了true这个boolean字面值，执行条件永远成立，所以代码块内容会永远执行下去。

那么如果我们希望控制执行的次数，应该如何实现呢？

## 4 控制循环

循环条件是一个boolean类型表达式，我们可以利用这个表达式来控制循环的

package chapter05;

	import java.util.Scanner;
	//类声明
	public class ParityCheckWhile2 {
		//主方法声明
		public static void main(String[] args) {
			//控制台内容捕获器
			Scanner scanner = new Scanner(System.in);
			int loopControl = 0;//循环控制变量
			while (loopControl < 10) {
				//等待获取控制台输入整数内容，并出入变量num
				int num = scanner.nextInt();
				//声明输出结果
				String result;
				//判断数字奇偶性（是否能被2整除），根据不同逻辑赋值给输出结果
				result = (num % 2 == 0 ? "这是一个偶数" : "这是一个奇数");
				//打印结果
				System.out.println(result);
				loopControl--;//每执行一次循环体，控制变量加1，同loopControl=loopControl+1;
			}
			
		}
	}

## 5 do..while

do…while循环和while循环类似，不同点在于do…while循环以do开头，先执行循环代码块，然后再判断循环条件，如果循环条件满足，则继续循环。由此可见，do…while循环中的循环代码块至少会被执行一次。

下面完成一个案例，这个案例的需求是让用户输入正确的程序密码之后，才可以执行下面的代码，否则继续让用户输入，直到输入正确为止，具体代码实现如下。

	import java.util.Scanner;
	
	class TestWhile3 {
		public static void main(String[] args) {
			// 使用字符串String存储密码，后面课程会详细介绍String类
			String userPass = ""; // 用户输入的密码
			final String PASSWORD = "123456"; // 正确密码为123456
			Scanner input = new Scanner(System.in);
			do {
				System.out.print("请输入程序密码：");
				userPass = input.nextLine(); // 从控制台获取用户输入的密码
				System.out.println();
				// 字符串的equals()方法用于判断两个字符串的值是否相同
			} while (!userPass.equals(PASSWORD)); // 密码输入不正确，继续循环，重新输入
			System.out.println("程序密码正确，继续执行！");
		}
	}

## 6 小结

![循环](https://coding.net/u/lanqiao/p/lanqiao/git/raw/coding-pages/public/img/Java8/loop.png)

自加(减)操作

	int i=0;
	i++;//等同于i=i+1;
	int a=1;
	System.out.println(a++);//此时打印1;a++是先引用后允许，
	System.out.println(a);//此时打印2;因为上一行a++操作此时已经生效。
	System.out.println(--a);//此时打印1，--a是先运算后引用。

## 实验二 打印图形

> 用*打印一个指定宽和高矩形到控制台

![](https://coding.net/u/lanqiao/p/lanqiao/git/raw/coding-pages/public/img/Java8/Rectangle.png)

## 0 实现步骤

	//定义宽和高
	//逐行输出
	//确定要输出多少行
	//确定每一行输出内容

## 1 代码实现

	public class Rectangle {
	
		public static void main(String[] args) {
			//定义宽和高
			int width = 10;
			int height = 8;
			//逐行输出
			//确定要输出多少行
			while(height >= 0){
				//确定每一行输出内容
				int widthControl = width;//控制宽度循环变量
				while(widthControl>=0){
					System.out.print("*");
					widthControl--;
				}
				System.out.println();
				height--;
			}
		}
	}

## 2 解读

这里我们使用了嵌套循环来打印一个矩形，外层循环控制输出行，内层循环控制输出每一行的内容。

`System.out.println();`,和`System.out.print("*");`的区别就是带有ln的输出会在末尾带上换行符。

初始外层循环`height>=0`成立，并把width赋值给一个外层循环体内部的变量widthControl，并开始了内层循环，内层循环中利用widthControl变量来控制循环的次数，这里为什么没有使用width直接作为循环控制变量？

![](https://coding.net/u/lanqiao/p/lanqiao/git/raw/coding-pages/public/img/Java8/nestingloop.png)

## 3 演变为直角三角形

![](https://coding.net/u/lanqiao/p/lanqiao/git/raw/coding-pages/public/img/Java8/Trigon.png)

如果要打印一个直角三角形又应该如何实现呢。

此时，我们每一行输出的内容不再是固定的数量(widthControl)，这个值会根据每一行的行数有关。所以内层循环变量
	
	public class Trigon {
	
		public static void main(String[] args) {
			int side = 10;//三角形边长
			int row = 0;//打印控制的行数
			while(row <= side){
				int column = row;//内层循环变量column跟外层循环相关联，会随着外层循环变化
				while(column>=0){
					System.out.print("*");
					column--;
				}
				row++;
				System.out.println();
			}
		}
	}

## 4 更清晰的循环结构

我们使用循环时需要关注的几个要素：

1. 控制变量初始化。
2. 循环条件的判断
3. 循环体
4. 控制变量的操作


Java提供一种更加清晰的结构来组织这几个要素

	for(控制变量初始化;循环条件判断;控制变量操作){
		//循环体
	}

我们来改写一下矩形的输出

	public class Rectangle2 {
	
		public static void main(String[] args) {
			//定义宽和高
			int height;
			int width=10;
			//逐行输出
			//确定要输出多少行
			for (height = 8; height>=0; height--) {
				for (int widthControl = width; widthControl >= 0; widthControl--) {
					System.out.print("*");
				}
				System.out.println();
			}
		}
	}

## 5 更进一步，输出九九乘法表

![](https://coding.net/u/lanqiao/p/lanqiao/git/raw/coding-pages/public/img/Java8/99.png)

观察一下，与直角三角形不同的是，每一个*的元素都替换为一个运算式。

	public class MultiplyTable {
		public static void main(String[] args) {
			for (int i = 1; i <= 9; i++) {
				//外层输出行
				for (int j = 1; j <= i; j++) {
					//内层输出行内容
					System.out.print(j + "x" + i + "=" + i * j + "\t");
				}
				System.out.println();
			}
		}
	}

# 实验二 质数的判断

> 目的：获取控制台输入的整数，判断该数字是否为质数。

质数表的质数又称素数。指整数在一个大于1的自然数中，除了1和此整数自身外，没法被其他自然数整除的数。由于质数很难被拆解，所以质数在密码学中被广泛应用。

## 0 思路

	//获取控制台输入
	//依次与比自己小的数字相除（1和本身除外）
	//如果能被整除次数不是质数

## 1 编码
	
	class PrimeNumber {
		public static void main(String[] args) {
			//获取控制台输入
			Scanner scanner = new Scanner(System.in);
			int num = scanner.nextInt();
			boolean isPrimeNumber = true;//数字是否为质数的状态
			//依次与比自己小的数字相除（1和本身除外）
			for (int i = 2; i < num; i++) {
				if(num>1&&num%i==0){
					System.out.println("能被"+i+"整除");
					isPrimeNumber = false;//能被整除，设置不是质数状态
					break;//已经判定为质数，循环已经没有意义，终止循环
				}
			}
			if(isPrimeNumber){
				System.out.println(num+"是质数");
			}else{
				System.out.println(num+"不是质数");
			}
		}
	}


## 2 解读

在学习switch语句的时候，首次接触了break语句，其作用是跳出switch代码块，在循环结构中，break同样可以跳出循环。

## 3 进阶实现

前面我们实现了一个数字是否为质数的判断，如果我们希望**输出指定数字范围内的所有质数**，又该如何实现呢。

	//获取数字范围
	//循环获取范围内整数
	//对这个整数进行质数判断
	//依次除以比自己小的数字

代码

	import java.util.Scanner;
	class PrimeNumber2 {
		public static void main(String[] args) {
			Scanner scanner = new Scanner(System.in);
			System.out.println("请输入要获取质数的范围..");
			int domain = scanner.nextInt();
			int i, j; // 声明循环参数
			outer: for (i = 2; i < domain; i++) { // 从2开始，逐个递增进行判断
				for (j = 2; j < i; j++) { // 从2开始，逐个递增到外循环的整数变量
					if (i % j == 0) // 外循环数除以内循环数，余0则非质数，跳出内循环
						continue outer; // 跳出内循环，跳到outer标识的位置继续循环
				}
				System.out.println(i); // 否则显示质数
			}
		}
	
	}

## 4 break与continue

break语句主要用于跳出循环体，不再执行后续循环判断和内容。

continue语句的主要作用为跳出**当次**循环，继续执行下一次循环判断。在使用嵌套循环时，可以利用**循环标记**来控制continue那一层循环

# 总结

顺序结构的程序语句只能被执行一次。如果您想要同样的操作执行多次,，就需要使用循环结构。

## Java中有三种主要的循环结构：

- while循环
- do…while循环
- for循环

## break关键字

break主要用在循环语句或者switch语句中，用来跳出整个语句块。
break跳出当前循环体，并且继续执行该循环下面的语句。

## continue关键字

continue适用于任何循环控制结构中。作用是让程序立刻跳转到下一次循环的迭代。

在for循环中，continue语句使程序立即跳转到更新语句。

在while或者do…while循环中，程序立即跳转到布尔表达式的判断语句。

# 实战练习

1、打印平行四边形（难度★★）

2、打印空心菱形（难度★★★）

3、计算100以内奇数的和（难度★）

4、求一个数的阶乘（难度★★★）

5、获取控制台输入的10个数，并输出其最大的数字（难度★★）

6、打印金字塔，金字塔的行数可以任意指定（难度★★★）

7、输出1到1000中能被7整除的数，每行显示10个，输出的数字之间用空格隔开（难度★★）

8、程序运行时自动产生一个1-100之间的随机数，让游戏者来猜这个数。当从键盘接收到游戏者输入的数据后，程序给出相应的提示信息，游戏者根据提示不断从键盘输入数据，直到猜中。另外程序还要提供“重新开始”和“退出”的功能，可供游戏者重复进行游戏（提示利用`int number = (int) (Math.random() * 100);`获取一个1~100的随机数）（难度★★★）