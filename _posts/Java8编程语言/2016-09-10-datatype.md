---
layout: post
title: 锅碗瓢盆——丰富的数据类型
category: 初学者的第一套Java教程
tags: Java 入门
keywords: 蓝桥 lanqiao 教程 java Java8 数据类型 字面值
description: 上一章我们用到了int,double和String作为变量的类型，实际上JAVA提供了丰富的数据类型，本章的主要内容就是：8种基本数据类型、赋值运算和简单的四则运算。
author: 付天有
importance: 4
order: 3
---
>上一章我们用到了int,double和String作为变量的类型，实际上JAVA提供了丰富的数据类型，本章的主要内容就是：

- 8种基本数据类型
- 四则运算

# 实验一 利用不同类型变量存储个人信息

> 这个实验我们要用不同的数据类型来表示一个人的基本信息：姓名、年龄、生日、性别、存款、婚否等等户口簿上有的没的那些信息，并且用一句话输出个人的基本信息。

## 1 回顾：int与double

之前我们学习过了用`int`来声明身高（整数变量），用`double`来声明圆周率（实数变量）。我们知道，变量在声明期间必须要指定相应的数据类型。

	int height = 180;
	double PI = 3.14;

## 2 思考：为什么需要多种数据类型

![餐具的不同规格](https://coding.net/u/lanqiao/p/lanqiao/git/raw/coding-pages/public/img/Java8/wandie.jpg)

我们吃饭时，会根据盛装的需求不同，从而选择不同规格的餐具，喝汤要用汤碗，吃饭要用小碗，菜通常用盘子等等。这样做一方面是习惯使然，更重要的是空间的合理利用。选择变量的数据类型就像我们选择吃饭的餐具一样，要根据我们存储的内容选择合适的数据类型。把数据分成不同的类型，编程的时候根据需要去选择，才能充分利用内存空间。 

## 3 动手实验

编写如下代码：

	public class DataType {
		public static void main(String[] args) {
			// 姓名：String类型(字符串)
			String name           = "马云"; 		

			// 出生月份：byte类型(超短整型)  范围 ：-128~127
			byte birthMonth       = 9; 

			// 出生年份：short类型(短整型) 范围： -32768~32767
			short birthYear       = 1964;		

			// 身高：int(整数类型)  范围：-2,147,483,648~2,147,483,647
			int height            = 170;   

			// 资产：long(长整型)范围： -9,223,372,036,854,775,808~9,223,372,036,854,775,807
			long money            = 1500000000000l;	

			// 体重：float(单精度浮点型);小数点后精度为6~7位
			float weight          = 55.3f;			

			// 金戒指纯度：double(双精度浮点型);小数点后的精度为15~16位
			double goldRingPurity = 0.99999999999;	

			// 性别：char(字符类型)，能表示一个字符(中文、英文、符号、数字均可);
			char gender           = '男';				

			// 已婚：boolean(布尔类型)，仅能是true或false
			boolean married       = true; 				
		}
	}

## 4 8种基本数据类型的归纳

我们实验中使用数据类型可以被分成4组（共8个）：

- **整型**：这一组包括`byte`、`short`、`int`和`long`,它们用于表示有符号整数。

其中我们用`byte`来描述出生月份，因为月份的数字表示形式仅为1-12。如果我们使用其他三种也能够存储这个数据，但是，就会造成空间的浪费。就好像你买了块1TB的硬盘，却只装了几MB的文件。这四种类型的描述类型都是整数，仅仅在空间占用上不同。

- **浮点型**：这一组包括`float`和`double`,它们表示实数。

这一类数据我们称为浮点数，通常是带有小数位的数字类型，两者的区别是存储空间的大小和小数点后的精度。

- **字符型**：这一组包括`char`,表示字符集中的符号，比如字母和数字。

例如：`'1'`,`'a'`,`'我'`。注意，字符类型必须用`''`(英文半角下的单引号)包裹，且仅能为一个字符（包括中文）

- **布尔型**：这一组包括`boolean`,是一种用于表示`true`/`false`值的特殊类型。

## 5 long和float的特别之处

有没有注意到，在为`long`，`float`类型赋值时，有些不同。

	long money   = 1500000000000l;  // 尝试去掉l，运行程序
	float weight = 55.3f;  // 尝试去掉f,运行程序

去掉1500000000000l的`l`,55.3f的`f`程序都会报错。这是为什么呢？

因为1500000000000和55.3叫做**字面值**，编译器对于这种字面值也会进行暂时的存储，在存储和开辟空间过程中，编译器按照约定指定默认类型，有小数点默认为double(8字节),无小数点默认为int（4字节）。如果声明`long money = 1500000000000;`1500000000000会被编译器认为是一个int，但是这个数字却已经超过了int的表示范围，所以会报错。同理`float weight = 55.3;`中，55.3被编译器当作一个double（8字节），而在赋值时，float（4字节）装不下这个double，所以编译出错。

1500000000000l会告知编译器这是一个`long`型的字面值

55.3f会告知编译器这是一个`float`型的字面值

## 6 容器要与所存放的内容匹配

分析下面两句代码的运行结果

	System.out.println(0.12345678901234567890);
	System.out.println(0.12345678901234567890f);

分析一下代码能否通过编译,为什么？

	int i = 1500000000000l;
	int a = 150l;
	long l = 150;
	boolean b = 1;
	char c = '111';

## 7 深入理解表数范围

在计算机世界里，数据就是0和1构成的，就好像我们的世界都是由原子构成的一样。有了0和1我们就能够衍生和模拟出各种各样的形式的数据（声音，图像，视频等等），所谓的数字电视，数码相机等等高科技产品的数据传输与存储也是基于这个原理。

0和1其实就是一串电流中的通电与断电的直观解释，数据本身就是电信号，一段电流信号中，通电的部分就是1，断电的部分就是0，对于0和1的不同中编排就演变出了不同语义。

而数据类型是0和1的编码约定，采用[二进制](http://baike.baidu.com/view/18536.htm)编码，二进制10是十进制数的2，并且把一组八位二进制数（0或1）称为一个字节。

回头来看一下我们的学过的数据类型

`byte`数据类型是8位（一个字节）、有符号的，其中一位表示符号，用[补码](http://baike.baidu.com/view/377340.htm "补码")的形式表示；

最小值是-128（-2^7）；

最大值是127（2^7-1）；

类似数据存储方式有`short`2字节、`int`4字节、`long`8字节，你是否能推算出他们的表数范围？

`float`数据类型是32位（4个字节）、存储形式为底数+指数（IEEE745标准）

最大值是(2-2^23)·2^127

最小值是2^-149

类似数据存储方式有`double`。

`char`类型是一个单一的16位（2字节）[Unicode](http://baike.baidu.com/view/40801.htm "Unicode")（一种对数字进行更高阶的编码规则）字符；

最小值是’\u0000’（即为0）；

最大值是’\uffff’（即为65,535）；

## 8 参考资料

更多数据类型详细介绍参考[基本数据类型](http://www.runoob.com/java/java-basic-datatypes.html)

# 实验二 计算商品的成本与折扣价

>某服装店因搬迁，店内商品八折销售。顾客买了一件衣服用去52元，已知衣服原来按期望盈利30%定价。
a)这件衣服原价是多少？
b)亏（盈）率是多少？
c)这件衣服如果75折（折扣后不计小数位，即抹零），商家的利润会是多少？

## 1 思路

所谓变量，本质上就是计算机内存的一个存储区域，想象成我们的锅碗瓢盆，我们可以把数据放进去，还可以取出来，还可以对数据进行运算，本例基于这样的类比更容易理解。

## 2 实现

	public class App02 {
		public static void main(String[] args) {
			//商品原价=折后的售价除以折扣比例
			//价格是有小数位的，所以用浮点类型来声明,尝试用float来声明，看看效果
			double originalPrice = 52/0.8;
			System.out.println("商品原价为" + originalPrice);
			
			//成本价格=定价/成本溢价比
			double costPrice = originalPrice/(1+0.3);
			System.out.println("商品的成本为："+costPrice);
			
			//75折后价格-成本=商品利润
			//originalPrice*0.75的结果为double，强制转化为int会舍去小数位（注意不是四舍五入），
			double profit = (int)(originalPrice*0.75)-costPrice;
			System.out.println("75折后的商品利润为：" + profit);
		}
	}

## 3 关于类型转换

`52/0.8`是一个除法运算，其中分子52是`int`字面值，0.8是`double`字面值，其运算结果为`double`,如若`originalPrice`声明为`int`，`float`等其他数据类型，编译器会告知`Type mismatch: cannot convert from double to float`或类似的编译错误。原因就是**当基础数据类型在参与混合运算时，容量小的类型自动转换成容量大的数据类型**，而将容量大的数据赋给容量小的变量时，编译器认为这是一个错误。
下面是各数据类型容量从小到大的一个排序：

> (byte、short、char) < int < long < float < double

**byte、short、char之间不会互相转换，三者在计算时首先会转换为int类型。**

	byte b1 = 12;
	byte b2 = 11;
	int result = b1+b2;//尝试更改result的数据类型,查看结果

`b1+b2`表达式是两个byte运算，byte、short、char运算时，会自动转为int型。

`(int)(originalPrice*0.75)`表达式中使用了**强制类型转换**，强制类型转换需要加上强制转换符(type)(var)。**转换时可能造成精度降低或溢出，使用时需要格外注意**。

**注意：运算表达式比较复杂时，建议使用`（）`来控制运算的优先级**，避免不必要的错误，比如`(int)(originalPrice*0.75)-costPrice;`与`(int)originalPrice*0.75-costPrice;`的运算结果是截然不同的。


## 4 巩固练习

编写如下代码并执行

	class TestConvert {
		public static void main(String[] args) {
			int i1 = 222;
			int i2 = 333;
			double d1 = (i1 + i2) * 2.9; // 系统将转换为double型运算
			float f1  = (float) ((i1 + i2) * 2.9); // 从double型转换成float型，需要进行强制类型转换
			
			System.out.println(d1);
			System.out.println(f1);
	
			byte b1 = 88;
			byte b2 = 99;
			//系统先转换为int型运算，再从int型转换成byte型需要进行强制类型转换
			byte b3 = (byte) (b1 + b2); 
			System.out.println("88 + 99 = " + b3); // 强制类型转换，数据结果溢出
	
			double d2 = 5.1E88;
			float f2  = (float) d2; // 从double型强制转换成float型，结果溢出
			System.out.println(f2);
	
			float f3 = 3.14F;
			// 这条语句不能写成f3 = f3 + 0.05;，否则会报错，因为0.05是double型，
			// 加上f3，仍然是double型，赋给float会报错
			f3 = f3 + 0.05F;
			System.out.println("3.14F + 0.05F = " + f3);
		}
	}

这段代码没什么业务逻辑，纯粹用于体验并巩固类型转换的语法。

# 大坑小洼

## 1 关于整数除法要注意

由于整数与整数运算，其结果还是整数，所以在使用`/`运算时需要注意结果很有可能会丢失掉小数部分。

	System.out.println(10/3);

结果为3

如果需要运算结果保留小数部分

	System.out.println((double)10/3);//强制转换分子(或分母为double或float)
	System.out.println(10/3d);//利用d或f描述字面值，隐式声明分子或分母为double或float

## 2 char与String运算规则

char是字符型，用`''`包裹，但是`char = 97;`也是被允许的，当使用数字（0~65535）赋值时，编译器会把数字对应的[ASCII码](http://baike.baidu.com/view/15482.htm?fromtitle=ascii%E7%A0%81&fromid=99077&type=syn "ascii")对应的字符赋值给char变量，参照[ASCII码对照表](http://tool.oschina.net/commons?type=4 "ascii码表")。char参与运算时自动被转为int，同样是字符所代表的ASCII码参与运算。

	public class CharSum {
		public static void main(String[] args) {
			char c1 = 97;
			char c2 = 'b';
			int result = c1 + c2;//运算自动转为int，同97+98
			System.out.println("c1的字符表示为" + c1);
		}
	}

String是字符串类型，用`""`包裹，它可以用`+`与基础数据类型参与运算。运算时**只要有String参与"+"运算，则整个表达式都被认定为字符串**。

	public class StringSum {
		public static void main(String[] args) {
			String str = "123";
			// str为String类型变量，参与运算后，表达式str+123+'a'会当作字符串拼接
			System.out.println(str+123+'a');
			
			// ""是一个空字符串，同样会提升整个表达式为String类型
			System.out.println(""+'a'+'b');
		}
	}

运行结果

	123123a
	ab

# 总结

- 每一个变量都属于一种数据类型，数据类型的分类可归纳如下图

![](https://coding.net/u/lanqiao/p/lanqiao/git/raw/coding-pages/public/img/Java8/2016-08-10-datatype.png)

- 基础数据类型总结

![基础数据类型](https://coding.net/u/lanqiao/p/lanqiao/git/raw/coding-pages/public/img/Java8/datetype.png)

- 数据类型的转换
  - 自动类型转换（隐式转换）

　　低容量向高容量赋值

```java
	long l = 123;//123为int字面值，无需转换，直接赋值给long型l
	double d = 123f;//123f是float字面值，自动转换为高容量doble
```

　　运算时自动升级

```java	
	//byte short char 运算时自动升级为int
	byte b1 = 12;
	byte b2 = 13;
	char c = 'a';
	short s = 22;
	int result1 = b1 + b2;
	int result2 = c + s;//char在运算时自动转为ASCII码值
```

  - 强制类型转换

　　高容量向低容量赋值

```java
	int i = (int) 123l;//123l是long型字面值，赋值给int需要强制类型转换
	float f1 = (float) (100*2.9);2.9参与运算后的表达式自动升级为double,向float赋值需要强制类型转换
```

　　对于byte,short,char三种类型而言，他们是平级的，因此不能相互自动转换，可以使用下述的强制类型转换。

	short i=99;
	char c=(char)i;

- 运算符：关于运算符，我们不知不觉已经介绍了不少，比如赋值运算`=`，算数运算`+ - * /`，Java的运算符还有很多，可以参考[http://www.runoob.com/java/java-operators.html](http://www.runoob.com/java/java-operators.html "运算符")

# 实战练习

1、 服装厂原来做一套衣服用布3.2米，改进裁剪方法后，每套衣服用布2.8米。原来做791套衣服的布，现在可以做多少套？（★★）

2、 食堂运来一批蔬菜，原计划每天吃50千克，30天慢慢消费完这批蔬菜。后来根据大家的意见，每天比原计划多吃10千克，这批蔬菜可以吃多少天？（★★）

3、 修一条公路，如果每天修260米，修完全长就得延长8天；如果每天修300米，修完全长仍得延长4天。这条路全长多少米？（★★）

4、一列长225米的慢车以每秒17米的速度行驶，一列长140米的快车以每秒22米的速度在后面追赶，求快车从追上到追过慢车需要多长时间？（★★）

5、一辆客车从甲站开往乙站，每小时行48千米；一辆货车同时从乙站开往甲站，每小时行40千米，两车在距两站中点16千米处相遇，求甲乙两站的距离。（★★）

6、商场改革经营管理办法后，本月盈利比上月盈利的2倍还多12万元，又知本月盈利比上月盈利多30万元，求这两个月盈利各是多少万元？（★★）

7、一批零件，甲独做6小时完成，乙独做8小时完成。现在两人合做，完成任务时甲比乙多做24个，求这批零件共有多少个？（★★）

8、一只船有一个漏洞，水以均匀速度进入船内，发现漏洞时已经进了一些水。如果有12个人淘水，3小时可以淘完；如果只有5人淘水，要10小时才能淘完。求17人几小时可以淘完？（★★）