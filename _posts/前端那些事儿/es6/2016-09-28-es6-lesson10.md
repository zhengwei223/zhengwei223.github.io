---
layout: post
title: ES6(ES2015)-lesson10
category: es6
tags: es6 es2015
author: 郑未
keywords: lanqiao 蓝桥 培训 教程 前端 es6 es2015
p_cate: 前端那些事儿
description: ①在 ES6 中，内建对象，如Array、Date以及DOM元素可以被子类化。②Math + Number + String + Object APIs 扩展
---

>内容提要

- 在 ES6 中，内建对象，如Array、Date以及DOM元素可以被子类化。
- Math + Number + String + Object的API有所扩展

# 使用extends扩展内建对象

[lesson10-1.js](https://coding.net/u/lanqiao/p/frontAdvance/git/blob/master/es6/lesson10-1.js)

    // Extend Date built-in
    'use strict'
    class MyDate extends Date {
      constructor() {
        super();
      }

      getFormattedDate() {
        var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',
          'Oct', 'Nov', 'Dec'];
        return this.getDate() + '-' + months[this.getMonth()] + '-' +
          this.getFullYear();
      }
    }

    var aDate = new MyDate();
    console.log(aDate.getTime());
    console.log(aDate.getFormattedDate());

再来一粒：

    class Stack extends Array {
      constructor() {
        super();
      }

      top() {
        return this[this.length - 1];
      }
    }

    var stack = new Stack();
    stack.push('world');
    stack.push('hello');
    console.log(stack.top());
    console.log(stack.length);

# Math + Number + String + Object APIs 扩展

ES6新加入了许多库，包括核心数学库，进行数组转换的协助函数，字符串 `helper`，以及用来进行拷贝的`Object.assign`。

下述代码[lesson10-2.js](https://coding.net/u/lanqiao/p/frontAdvance/git/blob/master/es6/lesson10-2.js)是一个综合示例，请分段学习和测试：

    //Number.EPSILON 代表了不同的两个 Number之间的最小的差
    console.log(Number.EPSILON);
    //Number.isInteger() 方法用来判断给定的参数是否为整数。
    Number.isInteger(Infinity) // false
    /*
    Number.isNaN() 方法用来检测传入的值是否是 NaN。
    该方法比传统的全局函数 isNaN() 更可靠。
    */
    Number.isNaN("NaN") // false

    //反双曲余弦
    Math.acosh(3) // 1.762747174039086
    //求直角三角形的斜边长
    Math.hypot(3, 4) // 5
    //32位带符号乘法
    Math.imul(2, 4);          // 8
    Math.imul(-1, 8);         // -8
    Math.imul(-2, -2);        // 4
    Math.imul(0xffffffff, 5); // -5
    Math.imul(0xfffffffe, 5); // -10

    //测验包含
    "abcde".includes("cd") // true
    //重复
    "abc".repeat(3) // "abcabcabc"

    // 从类数组或可迭代对象产生一个数组
    //Array.from(document.querySelectorAll('*')) //在浏览器环境下可访问document

    /*
    通过参数产生一个数组，和Array构造器不同的是：Array.of(42) 产生一个具备单元素42的数组
    ，而Array(42)产生一个具备42个元素（每个都是undefined）的数组
    */
    Array.of(1);         // [1]
    Array.of(1, 2, 3);   // [1, 2, 3]
    Array.of(undefined); // [undefined]

    /*
    arr.fill(value[, start = 0[, end = this.length]])
    用value填充数组，start到end
    */
    [1, 2, 3].fill(4);               // [4, 4, 4]
    [1, 2, 3].fill(4, 1);            // [1, 4, 4]
    [1, 2, 3].fill(4, 1, 2);         // [1, 4, 3]
    [1, 2, 3].fill(4, 1, 1);         // [1, 2, 3]
    [1, 2, 3].fill(4, -3, -2);       // [4, 2, 3]
    [1, 2, 3].fill(4, NaN, NaN);     // [1, 2, 3]
    Array(3).fill(4);                // [4, 4, 4]


    [1, 2, 3].find(x => x == 3); // 3  返回值
    [1, 2, 3].findIndex(x => x == 2); // 1   返回索引
    /**
    copyWithin拷贝数组的一部分到另外一个位置，返回此数组，并不改变数组的长度
    arr.copyWithin(target[, start[, end]])
    target将被替代的目标位置
    start拷贝的起始位置
    end拷贝的结束位置
    **/
    [1, 2, 3, 4, 5].copyWithin(3, 0) ;// [1, 2, 3, 1, 2]

    /*
    entries返回一个迭代器对象，包含索引与值组成的键值对
    */
    ["a", "b", "c"].entries() ;// iterator [0, "a"], [1,"b"], [2,"c"]
    //keys返回迭代器对象，包含索引
    ["a", "b", "c"].keys() ;// iterator 0, 1, 2
    //返回迭代器对象，包含元素值
    ["a", "b", "c"].values(); // iterator "a", "b", "c"

    /*
    Object.assign(target, ...sources)
    Object.assign() 拷贝一个或多个源对象的可列举属性至目标对象，返回目标对象
    */
    //---简单克隆---
    var obj = { a: 1 };
    var copy = Object.assign({}, obj);
    console.log(copy); // { a: 1 }

    //---合并对象---
    var o1 = { a: 1 };
    var o2 = { b: 2 };
    var o3 = { c: 3 };

    var obj = Object.assign(o1, o2, o3);
    console.log(obj); // { a: 1, b: 2, c: 3 }
    console.log(o1);  // { a: 1, b: 2, c: 3 }, target object itself is changed.