---
layout: post
title: ES6(ES2015)-lesson8
category: es6
tags: es6 es2015
author: 郑未
keywords: lanqiao 蓝桥 培训 教程 前端 es6 es2015
p_cate: 前端那些事儿
description: 本章主要介绍es6的Map + Set + WeakMap + WeakSet 数据结构
---

用于实现常见算法的高效数据结构，WeakMaps提供不会泄露的对象键(对象作为键名，而且键名指向对象)索引表 
*注：所谓的不会泄露，指的是对应的对象可能会被自动回收，回收后WeakMaps自动移除对应的键值对，有助于防止内存泄露。*

请看lesson8-1的代码和注释：

    // Sets基本用法
    var s = new Set();
    s.add("hello").add("goodbye").add("hello");
    console.log(`s.size === ${s.size}`);
    console.log(`s.has("hello") === ${s.has("hello")}`);

    // Maps基本用法
    var m = new Map();
    m.set("hello", 42);
    m.set(s, 34);
    console.log(`m.get(s) == ${m.get(s)}`);

    // Weak Maps
    var wm = new WeakMap();
    wm.set(s, { extra: 42 });
    console.log(`wm.get(s) == ${wm.get(s).extra}`);
    console.log(`wm.size === ${wm.size}`);//undefined

    // Weak Sets
    var ws = new WeakSet();
    ws.add({ data: 42 });
    // 由于所加入的对象没有其他引用，故在此集合内不会保留之。

    console.log(`ws.size === ${ws.size}`);  //undefined

