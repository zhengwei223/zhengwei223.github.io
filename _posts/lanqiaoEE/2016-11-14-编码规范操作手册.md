---
layout: post

title: 编码规范操作手册

category: lanqiaoEE

tags: 文档说明

description: 编码规范的说明

author: 丁彦涛

keywords: lanqiao 编码 规范 

---

# 第一章 应用构件

## 1.1. 命名规范
### 1.1.1. 包命名

1. 包名一律小写。

2. 包的命名遵循“基本包名+模块名+层级名+子模块包名”的命名规则， 比如， 应用名称为 lemon， 应用的基本包名为 org.lanqiao.lemon，
模块名称为 basic，则：

 Package：org.lanqiao.lemon.basic.controller 下存放所有的控制器。

 Package：org.lanqiao.lemon.basic.service 下存放所有的业务逻辑接口。

 Package：org.lanqiao.lemon.basic.service.impl 下存放所有的业务逻辑接口的实现类。

 Package：org.lanqiao.lemon.basic.service.pojo 下存放所有的持久化实体。

 Package：org.lanqiao.lemon.basic.service.util 下存放此模块用到的工具类。

 <font  color='red'>注意：</font>如果涉及多个模块，则在controller,serivce,impl, pojo,util之后添加模块名称

　　实际项目中，建议遵循分层原则来规划自己的包结构。例如：模块 basic 下新增一个包叫 task 用来存放定时任务的类，那么 package的名字可以是 org.lanqiao.lemon.basic.task。而我们再思考一步，task 对 basic 模块来说可能就是一些工具，以后还可能增加对缓存的处理等所以也可以放到org.lanqiao.lemon.basic.service.util.task 下。如何设计 package，需要根据实际的情况来决定。

### 1.1.2. 类命名

1. Class 的名字必须由大写字母开头，采用驼峰式的命名方式，即每个单词首字母大写而其他字母都小写的。类名不可包含下划线。

2. Class 名字的形式一般应为：  [形容词+]名词，且名词为单数形式。例如：RuleEngine、AbstractRuleActionException。

3. 对非业务逻辑类的 Interface（接口）名字一律以“Service”结尾，形式一般应为：[副词+]形容词+ Service，或 [形容词+]名词+ Service。例如 TeacherService。

4. 对于持久化实体，使用表义的单词来命名，比如 User、Org、Role 等。如果实体名称由多个单词组成，需要遵循第 1 条规范，比如 OrderItem。

5. 对于查询实体，命名要求同第 4 条，但一般建议查询实体以 VO 结尾。比如 UserInfoVO

6. 对于业务逻辑层的服务类一律采用实体名称+Service 的形式命名， 比如 UserService。

7. 对于业务逻辑的实现类，采用业务逻辑服务类+Impl 的方式命名，比如UserServiceImpl。

8. 对于控制器，尽量采用实体名称+Controller 的形式命名，比如 UserController。

### 1.1.3.  配置文件等资源文件命名

1. ORM 映射文件的命名采用默认生成的“实体名称.xml”的方式命名，存放在与持久化实体同一个 package 下。

2.  多语言文件的命名方式遵循默认生成的“ 模 块 名 称_messages_local.properties”的方式，其中的 local 表示语言，比如英文是 en，中文是 zh_CN。

### 1.1.4.  方法命名

1. 方法名字的形式一般应为下列三种形式的一种：

   a) [副词]+名词 eg:firstUser()
   
   b) 动词+名词  eg:findUserById()
   
   c)  Is+形容词  eg:isEmpty()
   
2.  第一个词汇全部小写，多个词汇时，采取驼峰式的规则。方法名中一般不建议出现下划线。比如 findUsers。

3. 在 Controller 中保持默认生成的方法名。

4. 新增方法编写规范：方法名以 save 开头+要新增的实体类名，参数为新增的实体对象（或根据实际情况添加其他参数） ，返回值可以根据实际情况选择是 void 还是新增成功后的实体对象。 如： public void[User] saveUser(User user)。

5. 修改方法编写规范：方法名以update 开头+要修改的实体类名，参数为修改的实体对象（或根据实际情况添加其他参数） ，返回值根据实际情况选择是void、boolean 或者修改成功后的实体对象。如：public void updateUser(User user)。

6. 删除方法编写规范： 方法名以 delete 开头+要删除的实体类名。 如： public void
deleteUser(User user);或者 public void deleteUser(String id)。

7. 批量操作编写规范：方法名以batch 开头+要进行的操作。如：批量删除：batchDelete。批量修改 batchUpdate。 

8. 查询方法编写规范：方法名以select开头。比如 selectUser，selectAll，selectById 等。

### 1.1.5.  变量命名

1. 变量的名字必须是小写字母开头。后面尽量采用驼峰式的命名方式。比如createDate，userName，password 等

2. 变量的命名要有一定的语义，如果不是一目了然的单词最好带有简单的注释。严禁采用类似”aaa”，”bbbb”这样的变量名称。

3. static final 变量名字应该全部大写，单词之间使用下划线。比如：USER_CACHE_KEY。

4. 方法参数的名字的命名和变量的命名规范一致。

5. 如果变量类型是数组，则总是按照下面的规则来命名：String[] users。而不是String users[]。

6. Java Bean 中的属性名和对应的 get 和 set 方法需要遵循 Sun 公司在 JSR 文档中的命名规范。

### 1.1.6.  注释

1. 类注释：


        /**
		* 类说明
		*
		* @author 作者
		* @version 1.0
		* @since 1.0
		*/


2. 方法注释：


        /**
        * 方法描述
        *
        * @param 参数1：参数1描述
        * @param 参数n：参数n描述
        * @return 返回值：返回值描述
        * @throws 抛出的异常：抛出的异常描述
        */
        


3. 成员变量注释：


		/**
		* 变量描述
		*/


4. 局部变量注释：采用单行注释（//）说明其含义。

5. 代码逻辑注释：在方法内，在需要的地方采用单行注释（//）说明代码的逻辑。注意：当方法内逻辑有分支，比如 if else 等，建议进行注释。


		if(….){
		//注释
		}else {
		//注释
		}



6. 对于程序中待处理内容的注释：采用“//TODO 待处理的内容描述”的方式进行注释。

## 1.2.  Jsp文件编写规范

### 1.2.1.  文件命名

1.  Jsp/Html 等 View 层文件命名遵循“实体类名+动作”的规则，第一个单词首字母小写。比如 userList.jsp 表示 User 实体的列表页，userEdit.jsp 表示 User实体的编辑页面，userNew.jsp 表示 User 对象的添加页面，userShow.jsp 表示User 对象详细信息页面。

2. Jsp/Html 等 View 层文件存放路径遵循 “webapp\pages\模块名称\”
的规范。比如模块名称为 upc，那么 user_list.jsp所在的路径为 webapp\pages\upc\user_list.jsp

### 1.2.2.  注释

Jsp 的注释分为两种：

　1. <!—注释内容 --> 此种注释鼠标右键查看源码时可以看到注释的内容
	
　2. <%-- 注释内容 --%>此种注释鼠标右键查看源码时看不到注释的内容
请根据实际情况的需要选择使用何种注释。

### 1.2.3.  其他

　1. 在 jsp 中尽量不要写 java 代码，jsp 只负责展示，业务逻辑的部分放到相关的
逻辑处理类中。

　2.开发工具默认生成的 jsp 模版如下， 如果是自己创建的 jsp 页面，
下面红色标记的部分要求必须要有。

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@include file="/pages/common/inc/path.jsp"%>
<%@include file="/pages/common/inc/easyui.jsp"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="${ctx }/css/basic/teacher_info_mag.css" rel="stylesheet" type="text/css" />
<title>维护教师信息</title>
</head>
<!-- 
				主要功能：添加员工，修改员工信息，双击查看详情
				 <h4>功能描述： 维护人员信息页面</h4>
				 <h5><pre>
				 author 丁彦涛
				 date 2016-8-26
				 version 1.0
				 email 
		 </pre></h5>
-->
</head>
<body>
</body>
<script type="text/javascript" src="${ctx }/js/basic/teacher_info_mag.js"></script>
</html>

```

### 1.2.4.  日志处理规范

使用如下方式获取日志记录的 logger：static Logger logger= LoggerFactory.getLogger(className.class);其中 className 为当前类的名称。

<font color='red'>注意：</font>

1. 当程序捕获了 Exception 且没有再抛出一个异常时，请一定在捕获的地点使用日志记录异常信息：

		try{
		userService.save(user);
		}catch(Exception e){
		logger.error("新建用户是发生异常：{}",
		e.getMessage(),e);
		}

2. 禁止直接使用 System.out.println 的方式打印异常信息。

3. 我们建议在程序中使用 Debug 级别时，遵循下面的写法：

		if(logger.isDebugEnabled()){
		logger.debug("");
		}


### 1.2.5.  Controller 编码规范

　　Controller 类一般负责参数获取、Service 实现的业务逻辑调用、返回处理结果等职责。 一般不在 Controller  里编写业务逻辑。

以下是几个 Controller 层的编码原则：

1. Controller 中所有的非与 uri 进行映射的方法（mvc.xml）的方法，都不要以 public 开头。此原则需严格遵守。

2. Controller 中尽量不要写业务逻辑，所有业务逻辑交由对应的 Service 层进行处理。

3. 所有 Controller 的 public 方法不要进行重载。

### 1.2.6. Service 编码规范

　　Service 类一般负责业务逻辑的处理。声明式事务默认以Service 结尾的接口为边界。所以，所有进行数据库操作的业务逻辑建议都写在Service 实现类中。以下是 Service 层的编码原则：

　　 Service 处理业务逻辑，所有需要加入声明式事务的方法的方法名称需要与 resources 目录下的 spring-tx.xml 内的事务属性一致。见下图：

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/norm/norm001.png)

　　Service 实现类内注入了 DAO 对象，使用 DAO 对象进行数据库操作。

### 1.2.7.  异常处理规范

### 1.2.7.1.  关于异常处理的几个原则

1. 建议在开发项目时首先规划自己的业务异常类。

2. 建议多使用运行时异常，平台会自动捕获运行时异常，并显示异常信息页面。

3. 在 Service 层捕获了异常后，如果方法使用的是声明式事务，则一定要重新抛出一个新的异常，这个异常最好是运行时异常，否则会影响平台的声明式事物的执行。

		try{
		this.save(user);
		}catch(MyException e){
		进行业务逻辑处理
		throw new MyException (e);//必须的，这里可以是自定义业务异常
		}

<font color='red'>注意：</font>

　　在 Service 层，除非需要处理发生异常的情况，一般情况下我们不建议捕获异常，而是推荐将异常抛出。如果不进行抛出，Service 内进行的事务无法进行回滚。

### 1.2.8.  编码规范

建议统一使用 UTF-8 来处理项目的编码。

整个工程设置编码为 UTF-8:

工程名称上：鼠标右键->Properties->Resource->Text file encoding->Other 选择UTF-8

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/norm/norm002.png)

jsp/html/.xml/.properties 等文件设置为 utf-8。

## 1.3.  前端页面开发规范（待定）

### 1.3.1.  目录结构

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/norm/norm003.png)

### 1.3.2.  组件扩展原则

　　如果项目中需要使用第三方前端页面组件，可以将对应的页面组件放置在webapp\js\common或者webapp\css\common 目录中。如下图：

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/norm/norm004.png)

在需要使用该组件的页面中引用组件所需要的 js 和 css。

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/norm/norm005.png)

### 1.3.3.  页面样式扩展原则

　　项目中如果需要自定义样式信息，可以将自定义的 css 文件放在项目正在使用的各自模块的目 录 中 。例如teacher_info_mag.jsp页面中引用teacher_info_mag.css，样式地址如下。

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/norm/norm006.png)

# 第二章 界面风格定制规范

## 2.1.  风格定制范围

### 2.1.1.  界面风格结构

开发完成的一个完整的应用构件，界面图示如下：

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/norm/norm007.png)

　　从界面整体风格上看，定制一套完整的界面风格，一般需要定制如图所示 3个区域的皮肤展现。其中 1,2,3 区域是属于界面主体框架部分。

　　下面说明 3 个区域的主要内容及作用：

　　(1) 顶部区域

　　顶部区域的主要内容一般包括应用构件的 logo、和快捷操作（修改密码、安全退出） 。
	
　　(2) 功能及导航区域

　　功能一般是指功能资源入口，相当于末级菜单；导航栏一般用于展现用户自定义的导航页面，如可以放置组织树等。
	
　　(3) 主体内容区域

　　主体内容区域展现的通常是开发的 JSP 页面，是用户进行业务操作的主要区域。

### 2.1.2.  界面风格定制内容
	
界面皮肤的定制主要包括两大部分：

(1) 界面主体框架部分，如 2.1.1 图示中的 1，2 两个区域

(2) 主体内容部分，如 2.1.1 图示中的 3 区域

#### 2.1.2.1.  界面主体框架部分风格定制

　　界面主体框架主要包括了（1）顶部区域、 （2）功能及导航区域，一般需要统一定制这三部分的皮肤风格。

#### 2.1.2.2.  主体内容部分风格定制

　　界面的主体内容部分展现的是开发人员利用 easyUI开发的结果。easyUI开发平台提供了轻量级的前端页面组件，不同的录入方式、校验、展现效果基本通过 HTML+CSS+Javascript 实现。easyUI支持完全自定义的风格扩展，用户可以通过 CSS 来编写自定义的皮肤。

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/norm/norm008.png)

# 第三章 数据库规范

3.1.  主键规范

　　所有主键均用uuid  varchar2(32)，详见《蓝桥软件学院教务管理平台数据库设计说明书样例》


	