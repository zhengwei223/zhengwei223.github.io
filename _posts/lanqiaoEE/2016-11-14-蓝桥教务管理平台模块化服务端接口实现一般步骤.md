---
layout: post

title: 蓝桥教务管理平台模块化服务端接口实现一般步骤

category: lanqiaoEE

tags: 文档说明

description: 蓝桥教务管理平台模块化服务端接口实现一般步骤说明

author: 丁彦涛

keywords:  蓝桥  接口 

---

# 一、项目架构介绍

 　　为方便项目管理，我们采用模块化对项目源码进行管理，Maven模块化项目管理就是一个不错的选择，我们首先把项目划分成多个模块，利用maven搭建模块化工程，其基本结构由一个父工程和多个子工程组成，子工程间没有必然联系互不影响，分工明确，每组开发成员只需维护好自己负责的模块即可，这样更便于多人项目开发，减少因项目整合而带来的冲突。到项目后期整合的时候只需要配置maven依赖即可完成项目子模块间的相互关联工作，方便快捷。
 
 　　 由于当前项目（Lemon）使用maven模块化项目管理模式，项目骨架如下图：
 
 ![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/interface/interface001.png)

我们将Lemon划分为5个模块分别是：

1.基础信息系统子模块 :

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/interface/interface002.png)

2.字典数据子模块 :

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/interface/interface003.png)

3.考试系统子模块:

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/interface/interface004.png)

4.权限系统子模块:

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/interface/interface005.png)

5.WEB子模块  :

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/interface/interface006.png)

具体项目创建方式详见《模块化方式创建maven工程.docx》

# 二、接口实现

　　我们现在以字典数据子模块中查询所有城市为例为大家详细讲解其实现步骤，其他接口实现方式与其雷同。

1.确定你想要实现的接口属于哪个模块，如果你不能确定应向项目组长或项目经理询问。当然我们接下来要实现的查询所有城市的接口毫无疑问是属于字典数据子模块，ok、那我们选择以下模块：

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/interface/interface007.png)

2.我们已经知道，根据我们项目的配置文件（详见lemon-web项目中resources目录）由客户端发来的http请求将被分发到不同的controller中，再根据注解配置确定要执行那个方法，这里我们需要在org.lanqiao.lemon.dict.controller中创建CityController用于处理分发过来的请求。在调用具体的方法之前我们还需要确定客户端发来的请求的名字：/dict/city/list.do?token=xxx 。那么接下来我们就可以书写接口实例了，如下图所示：

<font color='red'>(token作为密钥用于拦截器和过滤器做身份验证之用，用户在登录之后会生成一个token，并传送到客户端，客户端在向服务器端发送其他请求时必须将此token加上，否则拦截器或过滤器将此请求视为非法请求，警告用户：未登录或权限不足！)，为演示方便此例将token视为有效。后期开发需注意，必须传送有效的token！详见源代码：https://coding.net/u/lanqiao/p/restSSMdemo/git/blob/lemon/</font>

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/interface/interface008.png)

3.在相应的org.lanqiao.lemon.dict.service中创建controller中需要的service接口：CityService、并且提供方法声明：List<City>   selectCity()

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/interface/interface009.png)

4.在相应的org.lanqiao.lemon.dict.service.impl中创建serivice的实现类：CityServiceImpl，如下图所示：

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/interface/interface010.png)

5.在相应的org.lanqiao.lemon.dict.dao 中创建service层注入的dao接口、如下图所示：

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/interface/interface011.png)

至此，控制层（controller）-----服务层（service）------持久层（dao）接口  我们已经写完了，但是大家发现并没有操作数据库查询数据啊，不要急，这就是我们接下来要做的事情。

6.通过阅读一下配置文件：

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/interface/interface012.png)

可知我们想要最终操作数据库我们还需要依赖一个很重要的配置文件：

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/interface/interface013.png)

这个配置文件负责管理我们项目中所有操作数据库的自定义配置文件（如：CiytDao.xml）,所以我们需要在这里做如下配置：

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/interface/interface014.png)

至此，学习过mybatis基础的同学们也许就明白了，我们还需要创建自己的操作数据库写sql语句的配置文件！是的，我们找到org.lanqiao.lemon.dict.mapper.mysql目录，并在其中创建自定义配置文件CityDao.xml（注意一定是xxxDao.xml,这是规范）,配置内容如下图所示：

![典型技全栈术模型](http://lemon.lanqiao.org:8082/teaching/img/interface/interface015.png)

至此，我们的后台接口就写好了，可以测试了。

<font color='red'>注意：</font>

接口处理规范请参见：《蓝桥软件学院教务管理平台服务接口说明样例》





