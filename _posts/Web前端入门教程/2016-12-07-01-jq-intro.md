---
layout: post
title: JavaScript类库JQuery入门
category: Web前端入门教程
tags: Web前端
description: 本章的主要介绍如何用JavaScript语言类库JQuery的基本用法
author: 曹小虎
keywords: lanqiao 蓝桥 全栈 教程 Web前端
---


# 实验一：jQuery之Hello World

目的：

1. 掌握jQuery类库使用方法
2. 掌握jQuery对象内部结构
3. 掌握如何使用jQuery在线文档

 ![jq_intro_jq_helloworld_09](/public/img/js/jq_intro_jq_helloworld_09.gif) 

## 1.1 环境准备

 ![jquery_intro_jq_logo](/public/img/js/jquery_intro_jq_logo.png)

&emsp;&emsp;只有在网页里导入jQuery类库的js文件以后，你才能享受jQuery的各种便利和好处。

&emsp;&emsp;最简单的导入方式一共有两种。

### 下载和导入

&emsp;&emsp;下载jQuery类库可以直接找到jQuery的官方网站提供的下载页面。

&emsp;&emsp;打开网页[http://jquery.com/download/](http://jquery.com/download/)，然后依照图中所示完成如下操作：

 ![jq_intro_jq_helloworld_01](/public/img/js/jq_intro_jq_helloworld_01.gif)

&emsp;&emsp;新建一个名称是“jq_hello_world”的文件夹，把下载到的两个文件放置到其中的子文件夹“js”，然后新建一个“index.html”的空白页面，在页面头部用“script”标签引入js文件。

    <script type="text/javascript" src="./js/jquery-3.1.1.js"></script>

 ![jq_intro_jq_helloworld_02](/public/img/js/jq_intro_jq_helloworld_02.gif)

&emsp;&emsp;这两个文件的差别就在于：文件名末尾包含“min.js”的文件内容经过压缩处理、方便网络传输，而第一个文件没有经过压缩处理、方便程序员阅读。

### 使用CDN加速服务

&emsp;&emsp;CDN的全称是Content Delivery Network，即内容分发网络。

&emsp;&emsp;大家可以打开开源中国的网站的文章[盘点国内网站常用的一些 CDN 公共库加速服务](http://www.oschina.net/news/53128/public-cdn)，根据其中的指示选择自己的CDN服务。

&emsp;&emsp;我们此次实验选择[七牛云存储 开放静态文件CDN](https://www.staticfile.org/)上提供的jQuery v3.1.1的js文件。

 ![jq_intro_jq_helloworld_03](/public/img/js/jq_intro_jq_helloworld_03.gif)

## 1.2 初探jQuery

&emsp;&emsp;现在就可以使用jQuery类库了。

### hello，jQuery world

&emsp;&emsp;打开Chrome DevTools的Console面板，在控制台里面输入下面的代码：

 ![jq_intro_jq_helloworld_04](/public/img/js/jq_intro_jq_helloworld_04.gif) 

&emsp;&emsp;我们在页面头部追加下面的代码：

    <script type="text/javascript">
     <!-- jQuery的ready事件 -->
     $(document).ready(function(){
       <!-- 
          在jQuery构造函数里面传入字符串类型的标签名，
          根据标签名选中body元素，在元素的内容区追加文字 
       -->
	   $('body').append('Hello, jQuery World!');
	 });
    </script>

&emsp;&emsp;刷新页面，页面上已经出现了文字内容。

 ![jq_intro_jq_helloworld_05](/public/img/js/jq_intro_jq_helloworld_05.gif) 

### jQuery对象

&emsp;&emsp;在页面头部追加如下样式代码：

    <style>
    .container{
      border : 6px solid red;
	  width:600px;
	  margin-left:auto;
	  margin-right:auto;
	  position:relative;
	  float:left;
	  height:50px;
	  margin:5px;
    }
  
    .child{
      border : 6px solid green;
	  height :50px;
	  width:50px;
	  position :absolute;
	  float:left;
	  top:20px;
	  left:20px;
    }
    </style>

&emsp;&emsp;在页面内容区追加如下HTML代码：

     <!--网页内容区-->
    <div id="first" class="container"></div>
    <div class="container">
      外层容器
    <div class="child">
      内层div
    </div>
    </div>

&emsp;&emsp;刷新页面，我们在控制台检查jQuery选中body元素之后的情形：

 ![jq_intro_jq_helloworld_06](/public/img/js/jq_intro_jq_helloworld_06.gif) 

&emsp;&emsp;jQuery方法选中body元素之后，得到的jqBody是一个类似数组的对象，有length属性、而且第一个元素的下标是“0”。

&emsp;&emsp;我们用Chrome DevTools的元素选择器选中body元素。

    jqBody[0] === $0  //true

&emsp;&emsp;通过数字下标访问jqBody，将它与“$0”通过等性运算符“===”进行比较得知，jqBody[0]其实就是body元素的dom对象。

&emsp;&emsp;请大家用jQuery方法选中页面上的div元素，然后检查jQuery对象的内部结构。

### 打开jQuery在线文档

&emsp;&emsp;在控制台上展开jqBody的“\__proto__”属性，查看jQuery对象上有哪些方法。

&emsp;&emsp;然后到[jQuery中文网的在线API](http://www.jquery123.com/)查找并解释各个方法的用法。

 ![jq_intro_jq_helloworld_07](/public/img/js/jq_intro_jq_helloworld_07.gif) 

&emsp;&emsp;

&emsp;&emsp;

# 实验一的解读

&emsp;&emsp;jQuery是一个快速、简洁的JavaScript框架，是一个非常优秀的JavaScript代码库（或JS框架）。jQuery设计的宗旨是“write Less，Do More”，即倡导写更少的代码，做更多的事情。它封装JavaScript常用的功能代码，提供一种简便的JavaScript设计模式，优化HTML文档操作、事件处理、动画设计还有网络访问工具。

## 引入jQuery类库文件

### 开发版和压缩版

&emsp;&emsp;在下载类库文件的时候，我们一共下载了两个文件：

 ![js_jq_hello_world_08](/public/img/js/js_jq_hello_world_08.png) 

&emsp;&emsp;文件名上不含“min”文字的代码内容包含正常的空格、换行和代码缩进，适宜在开发阶段阅读、调试。

&emsp;&emsp;文件名上含有“min”文字的代码内容经过特殊压缩处理。文件压缩、减少文件数量等都是前台页面优化的措施，大家可以在把页面正式发布到生产环境的时候在页面上使用压缩文件。

&emsp;&emsp;这样做有以下几点好处：

 1. 减小了文件的体积 
 2. 减小了网络传输量和带宽占用 
 3. 减小了服务器的处理的压力 
 4. 提高了页面的渲染显示的速度 

&emsp;&emsp;这两个js文件都包含了完整的jQuery类库代码，其功能和作用完全一样，可以相互替换。

### CDN加速服务

&emsp;&emsp;CDN也可以称为内容分发网络，通俗的来讲，是把你网站的内容通过一种缓存方式分发到全国各个节点上。当用户访问你网站内容的时候，通过调度系统将用户的请求接入离用户最近的网络或者访问效果的缓存服务器上。通过缓存服务器为用户提供内容服务；相对于直接访问源站，这种方式缩短了用户和内容之间的网络距离，从而达到加速效果。

 ![what_is_cdn](/public/img/js/what_is_cdn.gif) 

&emsp;&emsp;在实验一使用七牛CDN服务的例子中，我们的页面访问了部署在距离最近的CDN节点上的jquery- v3.1.1.js代码。

&emsp;&emsp;有关CDN的更多信息，推荐大家查看[百度百科 内容分发网络](http://baike.baidu.com/link?url=FuiwGDvqhnBShFyvXAC4gG0Ai3J2x5Pzk93dWnBULYSgNnosYg6Y33o_eSdjqoleqgIl5rmArPLFTeJbkvZk6W7n5mwAqDwZZzPNs6an2zyO7emvJTHPlgPbyyUvuGpimhg94ul_bzgGk3ucyZgQSq)页面。

## 使用jQuery类库

### $(document).ready事件

&emsp;&emsp;打开[jQuery中文网-jQuery文档 文档加载ready事件](http://www.jquery123.com/ready/)的页面，我们可以看到相关介绍。

&emsp;&emsp;DOM模型中提供了window窗口的load事件，当页面上的所有的东西，包括DOM结构完成加载、图像被完全接收，load事件才会会被触发。

&emsp;&emsp;jQuery的ready事件只需要等到DOM结构完成加载，就会调用匿名函数里得代码。而不需要等待图片加载完成，。

&emsp;&emsp;jQuery.ready事件还有一种等价的写法：

     <!-- jQuery的ready事件的等价写法 -->
     $(function(){
       $('body').append('Hello, jQuery World!');
     })

 ![jq_intro_jq_helloworld_10](/public/img/js/jq_intro_jq_helloworld_10.gif) 

&emsp;&emsp;你可以在一个页面上多次定义jQuery.ready事件的回调匿名函数，在函数里面写入修改DOM结构的代码。

 ![jq_intro_jq_helloworld_11](/public/img/js/jq_intro_jq_helloworld_11.gif) 

### 提升网页加载速度的技巧

&emsp;&emsp;浏览器的js引擎在解读js类库和其他js脚本的时候，页面上的其他加载和初始化行为都会停顿，因此把类库和脚本挪到最后加载可以提高页面加载速度。

&emsp;&emsp;打开[蓝桥官网](http://www.lanqiao.org/)，大家就可以到这种做法的实际运用：

 ![jq_intro_jq_helloworld_12](/public/img/js/jq_intro_jq_helloworld_12.gif) 

&emsp;&emsp;请大家动手，按照这种方式修改我们的第一个jQuery页面。

### jQuery文档

&emsp;&emsp;[jQuery的官方网站](https://api.jquery.com/)服务器位于境外。由于众所周知的原因，对于大多数国内开发者而言，它的可访问性（accessiblity）比较差劲。

&emsp;&emsp;一个可替代方案是的[jQuery中文网](http://www.jquery123.com/)。它的内容全部由jQuery官网翻译而来，虽然准确性、及时性上有一点点差距，但对于国内开发者而言够有了。

&emsp;&emsp;万维网上还有很多jQuery的教程、博客，你可以通过百度搜索查找到别人是怎么用jQuery开发网站的。

### jQuery对象内部结构

&emsp;&emsp;不必多言，大家在控制台上已经了解到jQuery对象究竟是个什么玩意儿。

&emsp;&emsp;这里我推荐一篇来自知名网站StackOverflow上的文章：[jQuery object and DOM element](http://stackoverflow.com/questions/6974582/jquery-object-and-dom-element)。大家可以打开网站，深入阅读，了解jQuery对象与DOM对象的联系、区别。

&emsp;&emsp;

&emsp;&emsp;

# 实验二：jQuery利刃——选择与切割网页内容

目的：
 1. 掌握如何使用jQuery类库定位页面元素
 2. 掌握如何使用jQuery类库操作页面元素

实验结束的时候，大家会看到这样一个页面：

 ![jq_intro_img_gallery_07](/public/img/js/jq_intro_img_gallery_07.gif) 

## 2.1 准备环境

### 准备文件结构

&emsp;&emsp;新建名字是“jq_img_gallery”的文件夹。

&emsp;&emsp;新建名字是“js”和“img”的文件夹。

&emsp;&emsp;在“js”文件夹里面放入jQuery类库文件，在“img”文件夹放入四张图片。

&emsp;&emsp;新建名称是“index.html”的空白页面文件。

### 导入JS脚本

&emsp;&emsp;在空白HTML页面的body元素的结束标签之前插入如下代码：

      <!-- 页面内容区结束 -->
      <script type="text/javascript" src="./js/jquery-3.1.1.js"></script>
      <script type="text/javascript">
       /* 在页面上显示大号图片 */
       function showBigPicture(){
         console.log('displayBigPicture');
       }
   
       <!-- jQuery的ready事件的等价写法 -->
       $(showBigPicture);  
      </script>

&emsp;&emsp;详细情况有图有真相：

 ![jq_intro_img_gallery_01](/public/img/js/jq_intro_img_gallery_01.gif) 

## 2.2 增加预览大图效果

### 定义页面内容和样式

&emsp;&emsp;在内部样式区域插入如下CSS代码：

    body{
     margin:0;
     padding:0;
    }
    
    li {
     list-style:none;
     float:left;
     display:inline;
     margin-right:10px;
     border:1px solid #AAAAAA;
    }
    
    img {
     border:none;
    }
    
    img.small{
     width:100px;
     height:80px;
    }
    
    img.big{
     width:500px;
     height:400px;
    }

&emsp;&emsp;在页面内容区输入如下HTML代码：

    <ul>
    	<li>
    		<a href="./img/img1.jpg" class="tooltip" title="奔跑"><img src="./img/img1.jpg" class="small"/></a>
    	</li>
    	<li>
    		<a href="./img/img2.jpg" class="tooltip" title="潜水"><img src="./img/img2.jpg"  class="small"/></a>
    	</li>
    	<li>
    		<a href="./img/img3.jpg" class="tooltip" title="攀岩"><img src="./img/img3.jpg"  class="small"/></a>
    	</li>
    	<li>
    		<a href="./img/img4.jpg" class="tooltip" title="露营"><img src="./img/img4.jpg"  class="small"/></a>
    	</li>
    </ul>

&emsp;&emsp;刷新页面，可以看到下面的效果：

 ![jq_intro_img_gallery_02](/public/img/js/jq_intro_img_gallery_02.gif) 

&emsp;&emsp;提醒各位稍稍留意：当调试断点停留下来的时候，第三张图片仍然没加载完。也就是说，jQuery对象的*ready*事件回调函数里面的代码和浏览器图片加载的动作同时进行。

### 使用鼠标事件

&emsp;&emsp;用下面的代码给页面上class名称是“tooltip”的a元素增加鼠标事件：

	 $("a.tooltip").mouseover(function(e){
	    console.log('mouseover event fired...');
        console.dir(this);
	    console.log('mouseover event done...');
	 }).mouseout(function(e){
	    console.log('mouseout event fired...'); 
        console.dir(this);
	    console.log('mouseout event done...'); 
	 }).mousemove(function(e){
	    console.log('mousemove event fired...'); 
        console.dir(this);
	    console.log('mousemove event done...'); 	 
	 });

&emsp;&emsp;刷新页面，把鼠标移动到任意一张小图片上方，然后查看控制台输出：

 ![jq_intro_img_gallery_03](/public/img/js/jq_intro_img_gallery_03.gif) 

&emsp;&emsp;控制台工具方法console.dir显示：存在于jQuery事件回调函数内部的“this”，其实就是**触发当前事件的DOM对象**。 这是一个非常有用的事实，请大家务必牢记。

&emsp;&emsp;大家可以在控制台上输入以下代码，然后查看其中DOM元素的内部结构对比得知。

    //请你在控制台查询符合条件的DOM元素，并且查看它们的内部结构
    var aCol = document.getElementsByClassName('tooltip');

### 定义mouseover事件动作

&emsp;&emsp;在showBigPicture函数内部声明两个变量用来记录鼠标在屏幕上的坐标位置：

	 var x = 10;
	 var y = 20;

&emsp;&emsp;在jQuery的mouseover事件回调函数里面，*console.dir*一行代码下面插入如下代码：

		//获取DOM元素的title属性
		//赋值给在DOM元素新增的属性myTitle		
		this.myTitle = this.title;
		this.title = '';
		var imgTitle = this.myTitle ? "<br/>" + this.myTitle : "";
		//创建div元素
		var tooltip = "<div id='tooltip'><img src='" + this.href 
		             + "' class='big' alt='预览大图'/>"+ imgTitle +"</div>" ;
		
		//把新创建的div追加到页面内容区
		$("body").append(tooltip);
		//修改div元素的样式属性
		$("#tooltip").css(
			{
			    //绝对定位
			    "position" : "absolute",
			    //top ：以鼠标光标当前位置Y坐标开始计算
				"top"  : (e.pageY + y) + "px",
			    //CSS声明 以鼠标光标当前位置X坐标开始计算
				"left" : (e.pageX + x) + "px"
			}
		).show('fast');

&emsp;&emsp;刷新页面，可以看到：当鼠标移动到图片上方的时候，页面下方会生成一张内容一样、尺寸更大的预览图。大图片在页面上的位置与鼠标光标的位置有密切关系。

 ![jq_intro_img_gallery_04](/public/img/js/jq_intro_img_gallery_04.gif) 

### 定义mousout事件动作

&emsp;&emsp;在jQuery的mousout事件回调函数里面，*console.dir*一行代码下面插入如下代码：

		this.title = this.myTitle;
		//从页面上移除id是“tooltip”的页面元素
		$("#tooltip").remove();

&emsp;&emsp;刷新页面可以看到，当鼠标从小图上方移出的时候，大图会被从页面上删除。

 ![jq_intro_img_gallery_05](/public/img/js/jq_intro_img_gallery_05.gif) 

### 定义mousmove事件动作

&emsp;&emsp;在jQuery的mousmove事件回调函数里面，*console.dir*一行代码下面插入如下代码：

		$("#tooltip")
				.css(
				{
					"top"  :(e.pageY + y) + "px",
					"left" :(e.pageX + x) + "px"
				}
				);

&emsp;&emsp;刷新页面，可以看到如下效果：

 ![jq_intro_img_gallery_06](/public/img/js/jq_intro_img_gallery_06.gif) 

&emsp;&emsp;大号预览图的位置可以追着鼠标的光标跑。


# 实验二的解读

# 实验三：jQuery事件系统

# 实验三的解读

