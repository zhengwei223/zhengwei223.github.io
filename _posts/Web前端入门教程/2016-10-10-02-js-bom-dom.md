---
layout: post
title: JavaScript语言访问和操作网页
category: Web前端入门教程
tags: Web前端
description: 在Web前端的JavaScript语言编程的程中必须涉及到如何访问和操作浏览器的问题，本小节主要介绍了如何用JS语言访问浏览器以及其中的HTML文档
author: 曹小虎
keywords: lanqiao 蓝桥 全栈 教程 Web前端
---

> 本章目标

- 浏览器对象模型（BOM）
- 文档对象模型（DOM）

&emsp;&emsp;所有现代浏览器内部都内置有解析和运行JavaScript语言的JS引擎。

&emsp;&emsp;现在的浏览器都已经被模型化（modleing），抽象成能用JavaScript语言访问和操作的JS对象，这就是**Browser Object Model**,简称**BOM**。

# 实验一：用开发者工具学习BOM基本

## 1.目的

### 掌握DevTools控制台的使用方法


### 深入理解BOM顶层对象window


## 2.准备工作

### 学会用Google开发者工具的控制台执行JS代码

&emsp;&emsp;(Fn+)F12打开Chrome开发者工具，切换到Console控制台面板：

 ![open_chrome_devtool_console](/public/img/js/open_chrome_devtool_console.png){:width="500px" height="400px"}

&emsp;&emsp;在控制台中输入代码，查看控制台输出：

    console.log("Hello World");

&emsp;&emsp;在控制台中输入代码，查看控制台输出：

    for(var i=0;i<10;i++){
      if(i%5==0){
       console.log("Hello!");
      }else{
       console.log("Hey!");
      }
    }

&emsp;&emsp;当你看到控制台输出的时候，你已经知道了如何是用控制台执行JavaScript代码。


### 查看window对象说明文档

&emsp;&emsp;把浏览器当成一个对象，并且从Web前端编程的实际需要出发，抽象出一个实用模型，这就是浏览器对象模型（Browser Object Model,简称BOM）。

&emsp;&emsp;它可以让浏览器“听懂”JavaScript语言。借助这个模型，我们可以写出JavaScript代码，查看浏览器关键属性，打开、调整、移动、关闭一个新窗口，同时也可以修改网站页面的结构、内容，样式和行为。它就是一个架设在纯粹ECMAScript和实际各大厂商的浏览器之间的一个桥梁、通道。

 ![js_bom_bridge](/public/img/js/js_bom_bridge.png){:width="300px" height="200px"}

&emsp;&emsp;BOM里面的一切对象都是在浏览器里面可以用JavaScript语言访问、操作JavaScript对象。所有的BOM对象组成了一个类似树形结构，这棵树最顶端的一个对象就是window,这个名字表明它代表了一个打开到一个网页的浏览器窗口。window对象包含若干重要属性、方法和对象，这些正是我们需要关注的主要内容。

 ![overview_of_bom](/public/img/js/overview_of_bom.gif){:width="500px" height="400px"}

&emsp;&emsp;更多window对象的属性和方法列表，请直接点击W3CSchool的[Window 对象](http://www.w3school.com.cn/jsref/dom_obj_window.asp)。

## 3.步骤

### 查看窗口宽高和位置

&emsp;&emsp;请你直接在当前页面打开Chrome开发者工具，选择“Console”控制台面板。

&emsp;&emsp;输入以下代码，查看控制台输出：

    window.innerWidth
    window.innerHeight//请调整内侧窗口大小，查看属性值变化
    window.outerWidth
    window.outerHeight//请调整外侧窗口大小，查看属性值变化
    window.screenX
    window.screenY//请调整窗口位置，查看属性值变化

### 查看window.navigator的浏览器总体信息

&emsp;&emsp;**window.navigator**对象包含了关于用户浏览器的多项有用信息。

&emsp;&emsp;请你继续接着上一小节的操作，在控制台输入以下代码，查看输出内容：

    console.table(window.navigator)
    window.navigator===navigator
    navigator.appName
    navigator.appCodeName
    navigator.platform
    navigator.cookieEnabled
    navigator.product
    navigator.appVersion
    navigator.userAgent
    navigator.language
    navigator.javaEnabled()

&emsp;&emsp;警告!!!这是一个历史遗留问题：**window.navigator**对象上的信息具有误导性，因此任何人不应该以来这个对象提供的信息测试浏览器的厂商和版本信息。

### 查看你的电脑显示器屏幕信息

&emsp;&emsp;**window.screen**对象包含有关显示器屏幕的信息。

&emsp;&emsp;请你继续接着上一小节的操作，在控制台输入以下代码，查看输出内容：

    console.table(window.screen)//查看window.screen对象内容
    window.screen===screen
    screen.width　//你的屏幕宽度几个像素？
    screen.height　//你的屏幕高度几个像素？
    screen.availWidth　//
    screen.availHeight//
    screen.colorDepth//你的屏幕用多少比特位显示颜色？
    screen.pixelDepth//你的屏幕pixelDepth属性是多少？

### 操作window.history

&emsp;&emsp;第一步：请你手动打开一个浏览器新窗口，在地址栏输入蓝桥官网地址：[http://www.lanqiao.org](http://www.lanqiao.org)。

&emsp;&emsp;第二步：请你用鼠标滚轮，从上到下滚动浏览首页，直到页面不能继续向下滚动，你要继续向上把页面定位任意一个你选择的页面上。

&emsp;&emsp;第三步：打开Chrome DevTools界面，选择“Console”控制台面板，输入以下代码，查看控制台输出和网站页面效果：

    console.table(window.history)
    window.history===history
    window.history.length
    window.history.back()//请反复执行五次
    window.history.forward()//请反复执行五次
    window.history.go(-2)//请反复执行五次
    window.history.go(2)//请反复执行五次
    window.history.go(-1)//请反复执行五次
    window.history.go(1)//请反复执行五次

### 查看window.location包含的网页地址信息

&emsp;&emsp;有了**window.location**对象，我们既可以查询到窗口里面的当前页面地址，也可以把当前窗口重新指向另外一个网页。

&emsp;&emsp;请你接着在蓝桥官网窗口打开的控制台输入以下代码，查看控制台输出内容：

    console.table(window.location)
    window.location===location
    window.location.href
    window.location.hostname
    window.location.pathname
    window.location.protocol
    window.location.assign("http://www.github.com")


## 4.知识延伸

&emsp;&emsp;本次实验我么主要查看了浏览器对象模型(Browser Object Model,简称BOM)的顶层对象window的几个属性。

&emsp;&emsp;对照W3CSchool的文档页面上window对象的属性，我们还会看到多个本次实验没有涉及的条目。你可以直接在Chrome开发者工具的控制台里面运行JavaScript表达式，查看各个条目所涉及的属性名和属性值。

### 查看window对象的其他属性

&emsp;&emsp;**window**对象是浏览器对象模型的顶层对象，也可以被称为“**全局对象**”。定义在window对象上的属性被称为“**全局属性**”。请你在控制台里面输入以下代码，查看window对象的工具方法：

    //alert
    window.alert===alert
    window.alert
    alert('Hello World')
    //confirm
    window.confirm===confirm
    window.confirm
    //此行代码请执行两次
    console.log(window.confirm("Are you sure it is true?"))
    //prompt
    window.prompt===prompt
    window.prompt
    //此行代码请执行两次
    console.log(window.prompt("What is your name?"))
    //其他常用方法
    //open方法
    window.open===open
    window.open
    //close方法
    window.close===close
    window.close
    //setInterval方法
    window.setInterval===setInterval
    window.setInterval
    //setTimeout方法
    window.setTimeout===setTimeout
    window.setTimeout

&emsp;&emsp;更多window对象的常用方法，请同学们自行测试、总结。

### 查看ECMAScript全局变量

&emsp;&emsp;在Web前端进行JavaScript编程，JS代码运行在一个专有的浏览器窗口(window)里，浏览器对象模型的顶层对象window也就是当前运行环境的全局作用域。我们可以在这个全局作用域里查到ECMAScript规范中约定的的JS对象定义。

&emsp;&emsp;请你在DevTools的控制台里面输入以下代码，记录控制台的输出结果：

    window.Object===Object
    Object
    window.undefined===undefined
    undefined
    window.Infinity===Infinity
    Infinity
    window.String===String
    String
    window.NaN===NaN
    NaN
    window.Function===Function
    Function
    window.isFinite===isFinite
    isFinite

&emsp;&emsp;JavaScript还有很多别的标准内置对象，你可以自行验证。


### 查看document对象

&emsp;&emsp;浏览器会把被下载到本地的HTML文件解析成一个“document object model”，也就是“文档对象”。在浏览器对象模型的序列里，对应于由HTML页面转化而来的文档对象，是window对象的一个属性，它的名字是：“**document**”。

&emsp;&emsp;你可以在控制台输入以下代码，查看控制台输出结果：

    window.document===document
    document
    //查看document对象的属性
    document.URL
    document.all
    document.head
    document.body
    document.contentType
    document.characterSet
    document.cookie
    document.doctype
    //查看document对象的方法
    document.getElementById
    document.getElementsByName
    document.getElementsByTagName
    document.getElementsByClassName
    document.getSelection

# 实验二：打开并操作一个新窗口

## 1.目的

### 掌握window对象属性的使用方法

### 掌握定时任务的使用方法

## 2.准备工作

### 准备好一个代码模板

### 查阅setTimeout和setIntervalout方法文档

## 3.步骤

### 制作一个HTML代码模板

    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    </head>
    <body>
    </body>
    </html>

### 增加三个按钮

&emsp;&emsp;第一步：在HTML的\<BODY\>元素里面加入三个按钮,其中onclick属性表示按钮被点击时要调用的函数：

    <button onclick="openWin()">Create window</button>
    <button onclick="resizeWin()">Resize window</button>
    <button onclick="closeWin()">Close window</button>

&emsp;&emsp;第二步：在\<HEAD\>元素里面加入以下JavaScript代码：

    <script>

    function openWin() {
     alert("将要打开一个新窗口！")
    }


    function closeWin() {
     alert("将要关闭这个新窗口！")
    }
    

    function resizeWin() {
     alert("将要调整这个新窗口的尺寸！")
    }
    

    function moveWin() {
     alert("将要移动这个新窗口！")
    }
    </script>

### 用JavaScript打一个新窗口

&emsp;&emsp;第一步：声明一个名称是“**myWindow**”的变量，这个变量用来保存新的窗口对象。

    //声明一个窗口变量，用来保存即将打开的新窗口
    var myWindow;

&emsp;&emsp;第二步，写好打开一个新窗口的JS代码逻辑，其中我们需要用到window对象的三种弹出框。
    
    //Point-1：按钮点击事件之打开窗口
    function openWin() {
       //如果窗口已经定义,就不需要再打开一个
       if(myWindow) return;
       //Point-1.1：调用窗口的确认确认对话框
       var ok = window.confirm("你确定要打开一个新窗口吗？单击“确定”继续，单击“取消”停止。");
       if(ok){
       //Point-1.2：调用窗口提示输入对话框
       var winName = window.prompt("欢迎！请输入新窗口的名字：");
       //Point-1.3：调用窗口警示对话框
       window.alert("您输入的窗口名字是："+theResponse);
       myWindow = window.open("", theResponse, "width=500, height=300");
       }else{
       alert("您刚才点击了“取消按钮”!");
       }
    }

### 用JavaScript调整新窗口大小

&emsp;&emsp;我们需要给名称为“resizeWin”的函数编写动作代码。这个动作的基本逻辑是这样的：在窗口被打开的情况下，调用方法调整窗口尺寸。请你在这个函数里面应用以下代码：

     //Point-2：按钮点击事件之关闭窗口
    function resizeWin() {
       if(myWindow){
       //Point-3.1：调整窗体尺寸大小、获得焦点
       myWindow.resizeTo(700, 600);
       myWindow.focus();
       } 
    }

### 用JavaScript关闭新窗口

&emsp;&emsp;我们需要给名称为“closeWin”的函数编写动作代码，这是一个很简单的过程：在窗口被打开的情况下，关掉它。请你在这个函数里面应用以下代码：

     //Point-2：按钮点击事件之关闭窗口
    function closeWin() {
       if(myWindow){
       myWindow.close();
       myWindow=null;
       } 
    }

### 用table显示新窗口属性值

&emsp;&emsp;我们需要在页面上制作一个用于显示新窗口属性的表格。

&emsp;&emsp;**document**对象里的每个HTML元素都是一个节点，每个节点都有节点属性。其中，id属性的属性值在全局作用域里面没有重复，我们可以据此查找到唯一的文档节点对象。

&emsp;&emsp;下面是它的HTNL代码：

    <h1>myWindow常用属性</h1>
    <table>
      <tr>
        <td>X坐标:</td><td id="screenXValue"></td>
        <td>Y坐标:</td><td id="screenYValue"></td>
      </tr>
      <tr>
        <td>innerWidth:</td><td id="innerWidthValue"></td>
        <td>innerHeight</td><td id="innerHeightValue"></td>
      </tr>
      <tr>
        <td>outerWidth:</td><td id="outerWidthValue"></td>
        <td>outerHeigth:</td><td id="outerHeigthValue"></td>
      </tr>
      <tr>
        <td>窗口名字:</td><td id="nameValue"></td>
        <td>是否关闭:</td><td id="isClosedValue"></td>
      </tr>
    </table>

### 查询窗口属性更新表格内容

&emsp;&emsp;要想修改单元格\<td\>里面的内容，需要先找到对应docuemnt节点，修改它的innerHTML属性值。下面是整个方法的代码：

     //Point-5.1：查询DOM节点，更新节点内容
    function setTableContent(){
       document.getElementById('screenXValue').innerHTML=myWindow.screenX;
       document.getElementById('screenYValue').innerHTML=myWindow.screenY;
       document.getElementById('innerWidthValue').innerHTML=myWindow.innerWidth;
       document.getElementById('innerHeightValue').innerHTML=myWindow.innerHeight;
       document.getElementById('outerWidthValue').innerHTML=myWindow.outerWidth;
       document.getElementById('outerHeigthValue').innerHTML=myWindow.outerHeight;
       document.getElementById('nameValue').innerHTML=myWindow.name;
       document.getElementById('isClosedValue').innerHTML=myWindow.closed; 
    }

&emsp;&emsp;只需要在打开窗口的时候调用setTableContent这个函数就行了,更新openWin函数的内容：

    //Point-1：按钮点击事件之打开窗口
    function openWin() {
       //如果窗口已经定义,就不需要再打开一个
       if(myWindow) return;
       //Point-1.1：调用窗口的确认确认对话框
       var ok = window.confirm("你确定要打开一个新窗口吗？单击“确定”继续。单击“取消”停止。");
       if(ok){
       //Point-1.2：调用窗口提示输入对话框
       var windowName = window.prompt("欢迎！请输入新窗口的名字：");
       //Point-1.3：调用窗口警示对话框
       window.alert("您输入的窗口名字是："+windowName);
       myWindow = window.open("", windowName, "width=500, height=300");
       //更新窗口属性表格里面的内容
       setTableContent();
       }else{
       alert("您刚才点击了“取消按钮”!");
       }
    }

### 用定时任务实时更新窗口属性

&emsp;&emsp;我们计划每个一秒钟查询一次新窗口的属性，并且让这些属性显示在表格里面。这就要用到“**setInterval**”方法。

&emsp;&emsp;请你用**setInterval**定时工具，调用上一小节的setTableContent函数。

&emsp;&emsp;原来的代码是：
    
       //更新窗口属性表格里面的内容
       setTableContent();

&emsp;&emsp;更新之后的代码是：

       //更新窗口属性表格里面的内容
      setInterval(setTableContent,1000);

### 最终HTML代码

    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    </head>
    <body>
    <button onclick="openWin()">Create window</button>
    <button onclick="resizeWin()">Resize window</button>
    <button onclick="closeWin()">Close window</button>
    <h1>myWindow常用属性</h1>
    <table>
      <tr>
        <td>X坐标:</td><td id="screenXValue"></td>
        <td>Y坐标:</td><td id="screenYValue"></td>
      </tr>
      <tr>
        <td>innerWidth:</td><td id="innerWidthValue"></td>
        <td>innerHeight</td><td id="innerHeightValue"></td>
      </tr>
      <tr>
        <td>outerWidth:</td><td id="outerWidthValue"></td>
        <td>outerHeigth:</td><td id="outerHeigthValue"></td>
      </tr>
      <tr>
        <td>窗口名字:</td><td id="nameValue"></td>
        <td>是否关闭:</td><td id="isClosedValue"></td>
      </tr>
    </table>
    </body>
    </html>

  [点击复制按钮并在打开新窗口粘贴、运行以上代码](/public/tiyEditor.html)

### 最终JS代码

    <script>
    //声明一个窗口变量，用来保存即将打开的新窗口
    var myWindow;
    //Point-1：按钮点击事件之打开窗口
    function openWin() {
       //如果窗口已经定义,就不需要再打开一个
       if(myWindow) return;
       //Point-1.1：调用窗口的确认确认对话框
       var ok = window.confirm("你确定要打开一个新窗口吗？单击“确定”继续。单击“取消”停止。");
       if(ok){
       //Point-1.2：调用窗口提示输入对话框
       var windowName = window.prompt("欢迎！请输入新窗口的名字：");
       //Point-1.3：调用窗口警示对话框
       window.alert("您输入的窗口名字是："+windowName);
       myWindow = window.open("", windowName, "width=500, height=300");
       setInterval(setTableContent,1000);
       }else{
       alert("您刚才点击了“取消按钮”!");
       }
    }

     //Point-2：按钮点击事件之关闭窗口
    function closeWin() {
       if(myWindow){
       myWindow.close();
       myWindow=null;
       } 
    }
    
     //Point-3：按钮点击事件之调整窗口尺寸
    function resizeWin() {
       //Point-3.1：调整窗体尺寸大小
       myWindow.resizeTo(700, 600);
       myWindow.focus();
    }
    
     //Point-4：按钮点击事件之移动窗口位置
    function moveWin() {
       //Point-4.1：移动窗体坐标位置
      myWindow.moveTo(500, 500);
      myWindow.focus();
    }
       //Point-5.1：查询DOM节点，更新节点内容
    function setTableContent(){
       document.getElementById('screenXValue').innerHTML=myWindow.screenX;
       document.getElementById('screenYValue').innerHTML=myWindow.screenY;
       document.getElementById('innerWidthValue').innerHTML=myWindow.innerWidth;
       document.getElementById('innerHeightValue').innerHTML=myWindow.innerHeight;
       document.getElementById('outerWidthValue').innerHTML=myWindow.outerWidth;
       document.getElementById('outerHeigthValue').innerHTML=myWindow.outerHeight;
       document.getElementById('nameValue').innerHTML=myWindow.name;
       document.getElementById('isClosedValue').innerHTML=myWindow.closed; 
    }
    </script>

## 4.知识延伸

### HTML Document对象

&emsp;&emsp;window对象有一个名称是“document”的对象，它是一个以“document”节点作为根的树形结构，根节点以下，是个完整的HTML文档对象树。

&emsp;&emsp;以下面的简单HTML文档为例：

    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
    <html>
    <head>
    <title>A simple HTML Document</title>
    </head>
    <body>
      <h1>This is a Heading</h1>
      <p>This is a paragraph</p>
    </body>
    </html>

&emsp;&emsp;我们在Chrome开发者工具里面打开“Elements面板”可以看到下面的结果：

　![simple_html_doc](/public/img/js/simple_html_doc.png){:width="400px" height="300px"}　![html-dom-structure](/public/img/js/html-dom-structure.gif){:width="380px" height="280px"} 


&emsp;&emsp;打开控制台，输入如下代码：

    window.document===document//true
    document
    alert(document)

&emsp;&emsp;会看到打印结果，document是一个显示为“HTML Document”的object：

 ![alert_document_obj](/public/img/js/alert_document_obj.png){:width="400px" height="300px"}


### HTML Document Element

&emsp;&emsp;请你打开蓝桥官网：[http://www.lanqiao.org](http://www.lanqiao.org):

&emsp;&emsp;第一步，我们在“Elements”面板选中超文本元素“我们的服务”，

 ![select_el_demo](/public/img/js/select_el_demo.png){:width="500px" height="400px"}

&emsp;&emsp;然后在控制台输入下面的JS代码，并且查看输出:

    $0
    $0.href
    $0.onclick
    $0.title
    $0.innerText
    $0.innerHTML

&emsp;&emsp;第二步，进一步选中其中的图片元素，在控制台输入以下JS代码,查看输出：

    $0.src
    $0.style

&emsp;&emsp;第三步，在同一个页面上，找到id是“fullPage”的DIV元素，选中它，

 ![select_full_page_el](/public/img/js/select_full_page_el.png){:width="500px" height="400px"}

&emsp;&emsp;在控制台输入以下JS代码,查看输出：

    $0.id
    document.getElementById('fullPage')===$0
    $0.classList
    $0.className
    $0.style
    $0.innerHTML

&emsp;&emsp;我们可以通过JavaScript代码查询到任意一个HTML文档对象的内部节点，以及节点的任意一个属性。其中，最方便的办法是通过一个节点的id值快速查找到唯一节点,下面演示了另外几种常见的查找HTML文档节点的方法：

    //演示根据标签名字批量查找元素
    var links = document.getElementsByTagName('link')
    links
    links.length
    alert(links)
    alert(links[0])
    alert(links[0].type)
    alert(links[0].href)
    alert(links[0].rel)
    var imgs = document.getElementsByTagName('img')
    imgs
    imgs.length
    alert(imgs)
    var divs = document.getElementsByTagName('div')
    divs
    divs.length
    alert(divs)
    alert(divs[0])
    alert(divs[0].tagName)

    //演示根据class名批量查找元素
    var menuDiv = document.getElementsByClassName('menu')
    menuDiv
    menuDiv.length
    alert(menuDiv)
    alert(menuDiv[0])
    alert(menuDiv[0].content)
    alert(menuDiv[0].tagName)
    
    //演示根据name属性批量查找元素
    var metaDesc = document.getElementsByName('description')
    alert(metaDesc)
    metaDesc.length
    metaDesc[0]
    metaDesc[0].content
    alert(metaDesc[0])
    alert(metaDesc[0].tagName)
    var metaBaiduVerification = document.getElementsByName('baidu-site-verification')
    alert(metaBaiduVerification)
    alert(metaBaiduVerification[0])
    metaBaiduVerification[0].tagName


### 使用setTimeout全局方法

&emsp;&emsp;关于[setInterval](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/setInterval)函数的具体用法，请直接查阅链接资料。我们在这里计划用另外一个全局方法[setTimeout](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/setTimeout)实现相同的定时获取新窗口属性的功能。

&emsp;&emsp;第一步：打开openWin全局方法，修改其中代码，原来的代码是：

       setInterval(setTableContent,1000);

&emsp;&emsp;修改之后的代码是：

       setTimeout(setTableContent,1000);

&emsp;&emsp;第二步：找到setTableContent全局方法，在方法末尾加上一行代码：

       setTimeout(setTableContent,1000);

&emsp;&emsp;然后你可以重新运行代码，检查新的代码写法是否依然支持实时获取窗口属性。

### 用clearInterval清除定时任务

&emsp;&emsp;我们计划在页面上增加一个按钮，用于清理定时任务。

&emsp;&emsp;第一步：在声明“myWindow”变量的代码后面，增加一个变量用来保存setInterval返回的定时器id：

    //定时器id
    var timerId;

&emsp;&emsp;第二步：在openWin方法里面，找到“setInterval”一行代码，

       setInterval(setTableContent,1000);

&emsp;&emsp;,把它修改成：

       //用变量timerId保存定时器id
       timerId=setInterval(setTableContent,1000);

&emsp;&emsp;第三步：在“Close Window”的按钮下面，增加一个新按钮：

        <button onclick="clearTimer()">Clear Timer</button>

&emsp;&emsp;第四步：在\<script\>里增加“Clear Timer”按钮出处理点击事件的函数：

      function clearTimer(){
       //根据timerId清除定时器任务
       clearInterval(timerId);
      }


# 实验三： 制作电子时钟

## 1.目的

### 熟练使用JS日期对象常用API

### 掌握用DOM节点的onmouseover和onmouseout事件

## 2.准备工作

### 查阅JavaScript语言日期对象文档

### 查阅[onmouseover](http://www.w3school.com.cn/jsref/event_onmouseover.asp)和[onmouseout](http://www.w3school.com.cn/jsref/event_onmouseout.asp)

## 3.步骤

### 准备代码模板

    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
    <HTML>
      <HEAD></HEAD>
      <BODY></BODY>
    </HTML>

### 增加显示时间的DIV

&emsp;&emsp;在页面主体部分增加一个DIV:

        <div id="clock">
            <span id="hour">hh</span>:<span id="min">mm</span>:<span id="sec">ss</span>
        </div><br/>

&emsp;&emsp;其中，为每个元素都id元素赋值，方便以后根据唯一快速查找DOM节点。

&emsp;&emsp;为了让时钟的数字显示出不同颜色，在HTML页面头部加入下面的代码:

　　　　　  <style>
          #hour {color:red;}
          #min  {color:green;}
          #sec  {color:blue;}
       </style>

### 增加时钟控制按钮

&emsp;&emsp;在id是“clock”的div下面，增加两个按钮：

        <input type="button" onclick="clockStart()" value="Start"/>
        <input type="button" onclick="clockStop()" value="Stop"/>

&emsp;&emsp;其中，我们已经定义了它们的点击事件对应的函数名称。

### 增加按钮点击处理函数

&emsp;&emsp;继续上面一步，定义对应的事件处理函数

      function clockStart() {
       alert("clock button clicked");
      }
        
      function clockStop() {
       alert("clock button clicked");
     }

### 在控制台创建和使用日期对象

&emsp;&emsp;请你打开控制台，在其中输入以下代码：

    var now = new Date()//根据系统当前时间创建日期对象
    now.getDate()
    now.getDay()
    now.getFullYear()
    now.getMonth()
    now.getMilliseconds()
    now.getHours()//小时数
    now.getMinutes()//分钟数
    now.getSeconds()//秒数
    now.getTime()
    now.getTimezoneOffset()

&emsp;&emsp;在这次实验里面，我们用到了当前系统时间的小时数、分钟数和秒数。

### 查找并且显示当前小时分钟秒

&emsp;&emsp;我们需要一个函数来获取当前系统时间:

      function update() {
       var date = new Date();
       var hours = date.getHours();
       var minutes = date.getMinutes();
       var seconds = date.getSeconds();
       }

&emsp;&emsp;此外，我们还希望当前时间小时、分钟、秒数少于10的时候，显示出来的时候要在数字前面补一个０。这个要求可以通过“if”条件语句做到：

      function update() {
       var date = new Date();
        
       var hours = date.getHours();
       if (hours < 10) hours = '0'+hours;
        
       var minutes = date.getMinutes();
       if (minutes < 10) minutes = '0'+minutes;
        
       var seconds = date.getSeconds();
       if (seconds < 10) seconds = '0'+seconds;
        }

### 更新DOM节点显示内容

&emsp;&emsp;这里我们要查找DOM节点，把刚才获取到的事件信息写入到节点里面去，在update函数的末尾追加代码：

       document.getElementById('hour').innerHTML = hours;
       document.getElementById('min').innerHTML = minutes;
       document.getElementById('sec').innerHTML = seconds;

&emsp;&emsp;关于[innerHTML](http://www.w3school.com.cn/jsref/prop_tablerow_innerhtml.asp)属性的更详细信息，请查看链接内容。

### 用定时任务实时更新页面内容

&emsp;&emsp;要达到实施更新页面内容的目的，只有使用“setInterval”全局方法。

&emsp;&emsp;由于我们计划随后要停止这个定时任务，有必要保存它的id值。

&emsp;&emsp;第一步：在代码开头位置声明一个变量：

      // current timer if started
      var timerId; 

&emsp;&emsp;第二步：充实clockStart函数内容：

      function clockStart() {  
       if (timerId) return;
       //使用setInterval方法，以１秒为间隔，调用update方法
       timerId = setInterval(update, 1000) ;
       //立即更新时钟
       update();
      }

&emsp;&emsp;第三步：编写关闭时钟的方法：

      function clockStop() {
       //根据id清除定时任务
       if(timerId){
       clearInterval(timerId);
       //清除变量值
       timerId = null;
       }
      }


### 根据鼠标移动修改字体颜色

&emsp;&emsp;第一步：为HTML元素增加onmouseover函数：

    <div id="clock">
      <span id="hour" onmouseover="paintGold(this)">hh</span>:
      <span id="min" onmouseover="paintGold(this)">mm</span>:
      <span id="sec" onmouseover="paintGold(this)">ss</span>
    </div><br/>

&emsp;&emsp;第二步：编写处理事件的函数paintGold：

      function paintGold(el){
       el.style.color='gold'
      }

&emsp;&emsp;第三步：为HTML元素增加onmouseout函数：

    <div id="clock">
      <span id="hour" onmouseover="paintGold(this)" onmouseout="recoverColor(this)">hh</span>:
      <span id="min" onmouseover="paintGold(this)" onmouseout="recoverColor(this)">mm</span>:
      <span id="sec" onmouseover="paintGold(this)" onmouseout="recoverColor(this)">ss</span>
    </div><br/>

&emsp;&emsp;第四步：编写处理事件的函数recoverColor：

      function recoverColor(el){
       if(el.id==='hour'){
       el.style.color='red';
       }else if(el.id==='min'){
       el.style.color='green';
       }else{
       el.style.color='blue';
       }
      }

最后，重新运行代码，可以看到鼠标事件生效。

### 最终代码

    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
    <HTML>
      <HEAD>
      <style>
      #hour {color:red;}
      #min  {color:green;}
      #sec  {color:blue;}
      </style>
      <script>
    // current timer if started
    var timerId; 
    
    function clockStart() {  
      if (timerId) return;
      //使用setInterval方法，以１秒为间隔，调用update方法
      timerId = setInterval(update, 1000)
      //update(); 
    }
    
    function clockStop() {
      //根据id清除定时任务
      clearInterval(timerId);
      timerId = null;
    }
    
    function update() {
      var date = new Date();
    
      var hours = date.getHours();
      if (hours < 10) hours = '0'+hours;
    
      var minutes = date.getMinutes();
      if (minutes < 10) minutes = '0'+minutes;
    
      var seconds = date.getSeconds();
      if (seconds < 10) seconds = '0'+seconds;

      document.getElementById('hour').innerHTML = hours;
      document.getElementById('min').innerHTML = minutes;
      document.getElementById('sec').innerHTML = seconds;
    }

      function paintGold(el){
       el.style.color='gold'
      }

      function recoverColor(el){
       if(el.id==='hour'){
       el.style.color='red';
       }else if(el.id==='min'){
       el.style.color='green';
       }else{
       el.style.color='blue';
       }
      }
    </script>
    </HEAD>
    <BODY>
    <div id="clock">
        <span id="hour" onmouseover="paintGold(this)" 
        onmouseout="recoverColor(this)">hh</span>:
        <span id="min" onmouseover="paintGold(this)" 
        onmouseout="recoverColor(this)">mm</span>:
        <span id="sec" onmouseover="paintGold(this)" 
        onmouseout="recoverColor(this)">ss</span>
    </div><br/>
    <input type="button" onclick="clockStart()" value="Start"/>
    <input type="button" onclick="clockStop()" value="Stop"/>
    </BODY>
    </HTML>

  [点击复制按钮并在打开新窗口粘贴、运行以上代码](/public/tiyEditor.html)

## 4.知识延伸

